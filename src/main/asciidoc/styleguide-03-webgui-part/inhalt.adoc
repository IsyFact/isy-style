[[webgui-extrakt-aus-styleguide]]
= WebGui Extrakt aus dem BVA-Styleguide
== war dies der fehler

[[nutzung-web-bibliothek]]
=== Nutzung der Web-Bibliothek

Der vorliegende Styleguide ist in einer Java Bibliothek (PLIS-Web) umgesetzt.
Diese Bibliothek enthält notwendige Abhängigkeiten (Maven), Spring-Konfigurationen, CSS-Dateien, JSF-Komponenten (Composite Components) sowie zugehörige JSF-Templates (.xhtml). Die Bibliothek PLIS-Web setzt wiederum die Bibliothek PLIS-Style ein.
In der PLIS-Style werden die CSS-, JavaScript- und Bilddateien des Styleguides abgelegt und für die Nutzung komprimiert und kompiliert.

In diesem Abschnitt werden die Grundlagen zur Nutzung der PLIS-Web erläutert.
Details zur Architektur und weitere Vorgaben finden sich im Register Factory Detailkonzept Komponente Web GUI (TODO: Link ergänzen).

*Einbindung in Anwendung*

Bei Einsatz der PLIS-Web werden viele Konfigurationen bereits vorgenommen.
Die Anwendung muss nur noch wenige Einstellungen vornehmen.
Nachfolgend werden diese Schritte erläutert.

*Maven Abhängigkeit*

Die Maven Abhängigkeit für die PLIS-Web lautet:
[source, xml]
----
<dependency>

<groupId>de.bund.bva.pliscommon</groupId>
   <artifactId>plis-web</artifactId>
   <version>x.y.z</version>

</dependency>
----

Die Bibliothek bringt alle notwendigen Abhängigkeiten mit (Spring, Spring-Webflow, JSF, etc.). Anpassungen an den Abhängigkeiten können direkt in der Abhängigkeitsdefinition der Anwendung durchgeführt werden.

*Konfiguration web.xml*

Die web.xml der Anwendung muss entsprechend den Vorgaben konfiguriert werden (siehe Detailkonzept). Aus Sicht der Styleguide-Umsetzung ist vor allem die Konfiguration des ApplicationIntialisierungFilter wichtig.
Dieser Filter ist zuständig für die JavaScript Erkennung und die damit verbunden Konfiguration der globalen Einstellungen für die Session des Nutzers.
Beispiel:
[source, xml]
----
<filter> <filter-name>applicationInitialisierungFilter</filter-name>

<filter-class>de.bund.bva.isyfact.common.web.servlet.filter.ApplicationInitialisierungFilter</filter-class>

<!-- Optionaler Parameter: Der Parameter "urlsToSkip" dient zur Aufnahme von Url-Pfaden, relativ zum ApplicationContext-Pfad, die von der Filterung ausgenommen werden.
Mehrere Url-Pfade sind kommasepatiert anzugeben.
Es ist

pro Url ein fuehrendes "/" anzugeben. -->

<init-param> <param-name>urlsToSkip</param-name>
   <param-value>/app/resources</param-value>
</init-param>

<!-- Plicht-Parameter: Der Parameter "urlApplicationInitialisierung" enthaelt die Url zur Application-Initialisierungsseite.
Es ist ein fuehrendes "/" anzugeben. -->

<init-param>
   <param-name>urlApplicationInitialisierung</param-name>
   <param-value>/app/common/init/applicationInitialisierung.xhtml</param-value>
</init-param> </filter>
----

*Konfiguration Spring*

Folgende Konfiguration müssen in die anwendungsspezifische Spring-Konfiguration übernommen werden:

* Für die GUI/Spring-Webflow: +
<import resource="classpath:resources/plis-web/spring/webflow.xml"/>
* Für die Widgets und Controller: +
<import resource="classpath:resources/plis-web/spring/controller.xml"/>
* Für Spring-Security: +
<import resource="classpath:resources/plis-web/spring/plis-sicherheit-web.xml"/>

Die eingebundenen Spring-Konfigurationen erwarten folgende Beans unter dem angegebenen Namen vorzufinden:

* Konfiguration ("konfiguration") Die Konfigurationsschnittstelle aus der plis-konfiguration.
* MessageSource ("messageSource") Die MessageSource (aus Spring Core) der Anwendung.
* AufrufKontextVerwalter ("aufrufKontextVerwalter") Den AufrufKontextVerwalter aus der plis-aufrufkontext zum Zugriff auf Nutzerinformationen.
* AufrufKontextFactory ("aufrufKontextFactory") Die AufrufKontextFactory aus der plis-aufrufkontext zum Erzeugen von AufrufKontext-Objekten.
* Sicherheit ("sicherheit") Die Sicherheit aus der plis-sicherheit.
* AusnahmeIdMapper ("ausnahmeIdMappper") Ein konkreter Ausnahme-ID-Mapper.
Zuständig für die Fehlerbehandlung in der GUI.


*Konfiguration JSF-Renderer*

Derzeit muss noch folgende Konfiguration in die faces-config.xml der Anwendung aufgenommen werden:
[source,xml]
----
<!-- Spezifische Renderer müssen hier erneut angegeben werden, um die existierenden Renderer aus der Tomahawk Bibliothek zu überschreiben -->
 <render-kit>
    <!-- Spezieller Renderer für t:radio Elemente, welcher kein Label rendert. -->
    <renderer> <component-family>org.apache.myfaces.Radio</component-family>
    <renderer-type>org.apache.myfaces.Radio</renderer-type>
    <renderer-class>de.bund.bva.isyfact.common.web.jsf.renderer.NoLabelHtmlRadioRenderer</renderer-class>
    </renderer>

<!-- Spezieller Renderer für Checkboxen, welcher kein Label rendert. -->
   <renderer>
      <component-family>org.apache.myfaces.Checkbox</component-family>
      <renderer-type>org.apache.myfaces.Checkbox</renderer-type>
      <renderer-class>de.bund.bva.isyfact.common.web.jsf.renderer.NoLabelHtmlCheckboxRenderer</renderer-class>
      </renderer>
  </render-kit>
----
*Zugriff auf das Framework*

Zur Steuerung des Frameworks werden Controller und Models definiert, welche durch Einbindung der Spring-Konfiguration automatisch über Spring verfügbar sind, bzw.
per EL-Expressions in XHTML und Flows benutzt werden können (siehe Bean-Name in Klammern). Dies sind folgende:

* GlobalConfigurationController ("globalConfigurationController") mit GlobalConfigurationModel ("globalConfigurationModel" -ConversationScope) Enthält die globale Konfiguration der Nutzer-Session (z.B. Informationen über JavaScript Status)
* GlobalFlowController ("globalFlowController") mit GlobalFlowModel ("globalFlowModel" - FlowScope) Kontrolliert Zustände für einen konkreten Flow und bietet Zugriff auf querschnittsfunktionalität wie den MessageController und ValidationController (siehe unten)
* BasisController ("basisController") mit BasisModel ("basisModel" - FlowScope) Vereinigt die gemeinsamen Elemente und die Steuerung des Layouts für alle Seitentypen innerhalb der Anwendung.
Konfiguriert z.B. den Zugriff auf den Informationesbereich und auf die Seitentoolbar.
Stell Funktionen für die Druckansicht und für die Anzeige von modalen Dialogen zur Verfügung.
* ApplikationseiteController ("applikationseiteController") mit ApplikationseiteModel ("applikationseiteModel" - FlowScope) bzw.
DetailseiteController ("detailseiteController") mit DetailseiteModel ("detailseiteModel" - FlowScope) Konkrete Controller für die derzeit existierenden Seitentypen (siehe Applikationsseite und Applikation Detailseite).

Weiterhin existieren Controller für Teilbereiche:

* ErrorController ("errorController") mit ErrorModel ("errorModel" - FlowScope) Spezieller Controller und Model für die Darstellung der Fehlerseite.
* ValidationController ("validationController") mit ValidationModel ("validationModel" - FlashScope) Zuständig für die Verarbeitung von ValidationMessages (siehe auch Validierung).
* MessageController ("messageController") Verwaltet den Zugriff auf die FacesMessages im aktuellen FacesContext.
Stellt Methoden zur Ausgabe von Nachrichten bereit (siehe Vali dierung).
* LinksnavigationController ("linksnavigationController") und LinksnavigationModel ("linksnavigationModel" - FlowScope). Steuert die Linksnavigation.
Bietet Methoden zum manuellen Überschreiben der Linksnavigation (siehe Linksnavigation)
* QuicklinksController ("quicklinksController") und QuicklinksModel ("quicklinksModel - FlowScope). Steuert die Quicklinks.
Bietet Methoden zum Anlegen und Entfernen von Quicklinks (siehe Quicklinks).

*Zugriff auf das Layout*

Die Vorgabetemplates können über die JSF-Template Mechanismen eingebunden werden.
Das Framework stellt die Templates `/WEB-INF/gui/common/layout/applikation.xhtml` (Applikationseite) und `/WEB-INF/gui/common/layout/applikationDetailseite.xhtml` (Detailseite) zur Verfügung.
Diese erben wiederum von `/WEB-INF/gui/common/layout/basis.xhtml`, welches das grundlegende Layout vorgibt und alle notwendigen Skripte und Ressourcen einbindet.

Die Templates bieten folgende Schnittstellen über den ui:define/ui:insert Mechanismus von JSF an:

* inhaltsbereich: Der eigentliche Inhaltsbereich der Seite.

* headIncludes: Zum Einbinden von weiteren Ressourcen in den HTML Header.

* script: Zum Einbinden von seitenspezifischen JavaScript.

* modalDialogPlaceholder: Zum Einbinden von modalen Dialogen.

* printMetaInformation: Die Stelle um Meta-Informationen für Druckausgaben zu hinterlegen.

* form: Zusätzliche Form-Elemente können hier eingebunden werden.
Normalerweise stellt das Layout ein Form bereit.
Für spezifische Anpassungen (z.B. AJAX-Listpicker) müssen jedoch eigene Forms definiert werden.


Das CSS für den Styleguide wird automatisch geladen und eingebunden.
Zur anwendungsspezifischen Anpassung des CSS können folgende Dateien in der Anwendung verwendet werden:

* /css/custom-styles.css - Spezielle CSS Klassen für die Anwendung.

* /css/custom-print.css - Spezielle CSS Klassen für die Druckansicht der Anwendung.


*Beispiel - Erzeugen einer neuen Maske*

Im folgenden werden die Schritte aufgezeigt, welche durchgeführt werden müssen, um eine neue Maske mit der Nutzung des Styleguides anzulegen:

*Erzeugen eines Controllers und eines MaskenModels*

* Controller muss von AbstractGuiController erben.
* Controller muss in Spring als Bean konfiguriert werden.
* Model muss von AbstractMaskenModel erben.

*Erzeugen der Flow-Definition für Spring-Webflow*

Beispiel:
[source,xml]
----
<?xml version="1.0" encoding="UTF-8"?> <flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/webflow[http://www.springframework.org/schema/webflow http://www.springframework.org/schema/web]http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd[flow/spring-webflow-2.0.xsd]"

parent="applikationseiteParentFlow">

<secured attributes="..."/>

   <var name="beispielseiteMaskenModel"
       class="de.bund.bva....BeispielseiteMaskenModel"/>

   <on-start>
      <evaluate expression="beispielseiteMaskenController.initialisiereModel(beispielseiteMaskenModel)"/>
   </on-start>

   <view-state id="beispielseiteViewState" model="beispielseiteMaskenModel">
      ...
   </view-state>

   <end-state id="beendet" />

</flow>
----

Je nach Seitentyp muss entweder der detailseiteParentFlow oder der applikationseiteParentFlow als Parent-Flow angegeben werden.
Das Model wird als Variable definiert und damit im Flow erzeugt ("beispielseiteMaskenModel"). In der on-start Definition wird der Controller aufgerufen, um das Model zu initialisieren.
Dieser Schritt ist optional.

*Erzeugen des View-States*

Beispiel:
[source,xml]
----
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd[http://www.w3.org/TR/xhtml1/DTD/xhtm]http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd[l1-transitional.dtd]">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets" 
   xmlns:h="http://java.sun.com/jsf/html" 
   xmlns:f="http://java.sun.com/jsf/core" 
   xmlns:sf="http://www.springframework.org/tags/faces" 
   xmlns:isy="http://java.sun.com/jsf/composite/isyfact" 
   template="/WEB-INF/gui/common/layout/applikation.xhtml">

   <!-- Zusätzliches JS einbinden -->
   <ui:define name="script">
      <script type="text/javascript" src=".../beispielseite.js" />
   </ui:define>

   <!-- Form für AJAX-Seiteninhalt definieren -->
   <ui:define name="form">
     <h:form id="listpickerAjaxForm">
        <isy:formListpickerAjaxContent ... />
     </h:form>
    </ui:define>

   <!-- Metainformationen für die Druckausgabe -->
   <ui:define name="printMetaInformation">
      <ui:include src="...xhtml"/>
   </ui:define>

   <!-- Der Inhaltsbereich -->
   <ui:define name="inhaltsbereich">
      ...
   </ui:define>
</ui:composition>
----

Je nach Seitentyp muss entweder `/WEB-INF/gui/common/layout/applikationDetailseite.xhtml` oder `/WEB-INF/gui/common/layout/applikation.xhtml` als Template angegeben werden.

*Fehlerbehandlung*

siehe auch System-Meldungen und Validierung.

Die Darstellung von technischen Ausnahmefehlern wird bereits automatisch von der Bibliothek übernommen.
Für Fehler beim Zugriff auf den Anwendungskern kann zusätzlich eine Fehlerbehandlung im Controller eingeführt werden (try/catch). So können checked und unchecked Exceptions abgefangen werden.
Der MessageController bietet hierzu Methoden (writeException, writeAndLogException) zum Loggen und Erzeugen von Fehlern/Warnungen im Nachrichtenbereich an.

Es gelten folgende Regelen:

* Fachliche Fehler (PlisBusinessException) werden als Warnmeldungen im Nachrichtenbereich der GUI angezeigt
* Andere Fehler (Laufzeitfehler, PlisTechnicalException, PlisTechnicalRuntimeException) werden mit einer technische Fehlermeldung im Nachrichtenbereich der GUI angezeigt.



[[hauptfenster]]
=== Hauptfenster

Das im Folgenden beschriebene UI-Design gilt in erster Linie für browserbasierte Anwendungen des Bundesverwaltungsamtes.
Da der Benutzer nicht durch die Verwaltung mehrerer geöffneter Browserfenster oder Browsertabs belastet werden soll, arbeitet er innerhalb der Applikation mit nur einem Hauptfenster.
Im Wesentlichen besteht das Hauptfenster aus einem Header und einem Inhaltsbereich dessen Inhalt je nach Seitentyp und Applikation variieren kann.

:desc-image-aufbauhauptfenster: Allgemeiner Aufbau des Hauptfensters
[id="image-aufbauhauptfenster",reftext="{figure-caption} {counter:figures}"]
.{desc-image-aufbauhauptfenster}
image::image31.png[align="center", width="629",height="526"]



*Aufbau des Hauptfensters*

* Header Bereich

** Der Aufbau des Headers ist immer konsistent und ändert sich nicht.

* Inhaltsbereich

** Inhalt und Layout wechselt je nach Seitentyp.
** Seitentypen
*** Login
*** Dashboard (Applikationsportal)
*** Dashboard Unterseite
*** Applikation
*** Applikation Detailseite


*Richtlinien zur Anwendung*

* Es existiert nur ein Hauptfenster.
* Im Hauptfenster kann jeweils nur ein Seitentyp angezeigt werden entweder das Dashboard oder eine Applikation.
* Das Hauptfenster kann durch Schließen des Browserfensters oder Browsertabs geschlossen werden.
* Da sich das Hauptfenster im Browser befindet lässt es sich durch Größenänderung des Browsers in Breite und Höhe verändern.
* Die optimale Darstellung wird ab einer Bildschirmauflösung von *1280x1024 px* (SXGA) erzielt.
* Das Verhalten des Hauptfensters bei Größenänderungen ergibt sich aus dem Layout Verhalten der angezeigten Bereiche und Elemente innerhalb des Fensters.
Genauere Informationen finden sich bei den jeweiligen Elementen.

[[header-bereich]]
==== Header Bereich

Der Header Bereich enthält allgemeine Informationen der Applikation.

:desc-image-headersolo: Header
[id="image-headersolo",reftext="{figure-caption} {counter:figures}"]
.{desc-image-headersolo}
image::image36.png[align="center", width="629",height="104"]

:desc-image-aufbaudesheaderbereichs: Aufbau des Header-Bereiches
[id="image-aufbaudesheaderbereichs",reftext="{figure-caption} {counter:figures}"]
.{desc-image-aufbaudesheaderbereichs}
image::image37.png[align="center", width="629",height="149"]


*Aufbau*

* *A* Logo des Portalanbieters
* *B* Farbmarkierung des Applikationsportals
* *C* Logo des Applikationsportals
* *D* Login-Information
* *E + F* Hauptnavigation und Subnavigation als Flyout (siehe Kapitel Horizontale Navigation)

[[hinweise-zur-implementierung-1]]
===== Hinweise zur Implementierung

_Allgemeines_

Derzeit wird die Navigationsleiste im Header Bereich noch statisch geladen.
Jede Anwendung muss daher die Ressource +
   `/WEB-INF/gui/comm on/seitenelemente/navigation.xhtml` +
mit einer spezifischen Anpassung überschreiben.


Der Nutzerbereich wird nicht von der plis-web zur Verfügung gestellt, da sich z.B. das Verhalten des Logout Buttons in verschiedenen Betriebsumgebungen unterscheiden kann (unterschiedliche HTTP Parameter, etc.). Konkrete Anwendungen müssen über die Konfigurationseinstellung `gui.header.nutzerbereich.xhtml.src` das XHTML angeben, welches den Nutzerbereich definiert.
Die Angabe der Konfiguration ist verpflichtend.

_Titel_

Den Titel gibt es nur auf Applikations-Detailseiten (s. Implementierungshinweise dort).


_Maskentexte_

Maskentexte, die nur innerhalb eines bestimmten Flows verwendet werden, können in der Konfigurationsdatei <Flow-Name>.properties im Ordner `resources/nachrichten/maskentexte` definiert werden.
Wenn die jeweilige Konfigurationsdatei vorhanden ist, werden die Maskentexte automatisch geladen und in die Variable msg_currentflow abgespeichert.
Die Maskentexte des jeweiligen Flows können dann beispielsweise wie folgt ausgelesen werden:

[source, xml]
----
<h:outputText value="#\{msg_currentflow.MAS_Ueberschrift}" />
----

Auf übergreifende Maskentexte aus der Konfigurationsdatei 
`resources/nachrichten/maskentexte.properties` 
kann über die Variable msg zugegriffen werden.

=== Hauptfenster
==== Applikationsseiten
*Hinweise zur Implementierung*

Applikationsseiten werden über den Controller `ApplikationseiteController` und das Model `ApplikationseiteModel` realisiert.

Wenn eine Applikationsseite erstellt werden soll, dann muss der Flow der Applikationsseite vom Flow `applikationseiteParentFlow` erben.
Es muss weiterhin ein Controller erstellt werden, der vom `AbstractGuiController` erbt und ein Model, das vom `AbstractMaskenModel` erbt. Die XHTML-Seiten der ViewStates müssen alle vom Template `/WEB-INF/gui/common/layout/applikation.xhtml` erben.

Der `ApplikationseiteController` stellt sicher, dass alle layoutspezifischen Funktionen (z.B. der Linksnavigation) einer Applikationsseite initialisiert und zur Verfügung gestellt werden.
Abweichungen vom Standardvorgehen (z.B. Linksnavigation ausblenden) können durch Zugriff auf den Controller und Model in spezifischeren Controllern beim Initialisieren durchgeführt werden.

Neben dem `ApplikationseiteController` existiert auch der `BasisController`.
Dieser bietet Zugriff auf seitentypunabhängige Layoutfunktionen (z.B. modalen Dialog anzeigen).

Siehe weiterhin die Hinweise in den Seiten Header Bereich, Linksnavigation und Quicklinks.

==== Applikation Detailseite

*Hinweise zur Implementierung*

Applikationsdetailseiten werden über den Controller `DetailseiteController` und das Model `DetailseiteModel` realisiert.

Wenn eine Applikationsdetailseite erstellt werden soll, dann muss der Flow der Applikationsdetailseite vom Flow `detailseiteParentFlow` erben.
Es muss weiterhin ein Controller erstellt werden, der vom `AbstractGuiController` erbt und ein Model, das vom `AbstractMaskenModel` erbt.
Die XHTML-Seiten der ViewStates müssen alle vom Template `/WEB-INF/gui/common/layout/applikationDetailseite.xhtml` erben.

Der DetailseiteController stellt sicher, dass alle layoutspezifischen Funktionen (z.B. der Seitentoolbar sowie Buttons in der Toolbar) einer Detailseite initialisiert und zur Verfügung gestellt werden.
Abweichungen vom Standardvorgehen (z.B. Seitentoolbar ausblenden, Druckbutton einblenden, Informationsbereich einblenden) können durch Zugriff auf den Controller und Model in spezifischeren Controllern beim Initialisieren durchgeführt werden.

Neben dem `DetailseiteController` existiert auch der `BasisController`.
Dieser bietet Zugriff auf seitentypunabhängige Layoutfunktionen

(z.B. modalen Dialog anzeigen).

_Titel_

Der TitlesListener (Listener für Spring-Webflow) ermöglicht es, dass konfigurierte Nachrichten anhand von Namenskonventionen automatisch als Title (Title-Tag), Headline (Titelzeile) oder Breadcrumb verwendet werden.
Der TitlesListener ist automatisch eingebunden und muss nicht explizit aktiviert werden.

Folgende Angaben sind zulässig:

`MAS_\{FlowName}_Title` +
`MAS_\{FlowName}_\{ViewState}_Title` +
`MAS_\{FlowName}_Headline` +
`MAS_\{FlowName}_\{ViewState}_Headline` +
`MAS_\{FlowName}_Breadcrumb` +
`MAS_\{FlowName}_\{ViewState}_Breadcrumb`

Die Angaben müssen sich in den Anwendungsressourcen (analog zu anderen Nachrichten) befinden und über eine MessageSource-Bean ("messageSource") der PLIS-Web zur Verfügung gestellt werden.

Wenn vorhanden, werden stets die Angaben mit ViewState verwendet, ansonsten die Angaben ohne ViewState.
In der Flowdefinition können die zu verwendenden Texte überschrieben werden, indem die Attribute titleKey , breadcrumbKey und headlineKey gesetzt werden.
Wenn für

den Title keine Angabe gefunden werden kann, dann wird der Wert von MAS_Global_Title verwendet.
Weiterhin kann mit `MAS_Global_Title_Prefix` ein globaler Präfix für den Title gesetzt werden.

Weiterhin kann über eine Angabe von `<ui:define name="titel"/>` in Seiten definiert werden, welche Inhalte rechts neben dem bereits definierten Title (Title-Tag) ausgegeben werden (seit Version 3.1.x der plis-web). Im Folgenden ein Beispiel:

[source, xml]
----
<ui:define name="titel"> 
   <h:outputText value="zusätzlicher Text" /> </ui:define> Über die Angaben
<ui:define name="titelzeileInfoLinks"/> bzw. <ui:define name="titelzeileInfoRechts"/> kann
----

weiterhin definiert werden, welche Inhalte zusätzlich direkt rechts neben der Headline (Titelzeile) angezeigt werden bzw.
ganz am rechten Rand der Headline angezeigt werden (seit Version 3.1.x der plis-web). Im Folgenden ein Beispiel: 

[source, xml]
----
<ui:define name="titelzeileInfoLinks"> 
   <h:outputText value="zusätzlicher Text" /> 
</ui:define>
<ui:define name="titelzeileInfoRechts"> 
   <h:outputText value="zusätzlicher Text" /> 
</ui:define>
----

_Hinweis:_ Die Breadcrumbfunktionalität ist derzeit noch nicht vollständig umgesetzt.

=== Dialoge

*Hinweise zur Implementierung*

Modale Dialoge werden mit dem Tag `<isy:modalDialogContent>` definiert.
Der Dialog besitzt folgende Facets:
* Der Header-Bereich
* Der Body-Bereich
* Der Footer-Bereich


Beispiel:
[source, xml]
----
<ui:define name="modalDialog">
   <isy:modalDialogContent>
     <f:facet name="modalHeader">\{msg.MEL_Lichtbild_anzeigen_Titel}</f:facet>
     <f:facet name="modalBody">
     <div class="form-horizontal">
        ...
     </div>
     </f:facet>
     <f:facet name="modalFooter">
        <div class="form-horizontal readonly">
           ...
        </div>
      </f:facet>
   </isy:modalDialogContent>
 </ui:define>
----

Das Tag `<isy:modalDialogContent>` wird über den UI-Platzhalter modalDialog eingefügt.
Dieser Platzhalter sorgt dafür, dass je nach JavaScript Verfügbarkeit, der Inhalt des modalen Fensters entweder als Inhalt oder als eigenständiger Dialog gerendert wird.
Die Funktionsweise des modalen Dialogs ist in das Basis-Layout eingebunden.
Um einen Dialog zu öffnen muss dieser als eigener View-State (in Spring-Webflow) definiert werden.
Beim Eintreten in den Flow wird das modale Fenster über einen Aufruf des BasisController geöffnet.
Beim Verlassen des View-States wird dieser wieder geschlossen.
Beispiel:

[source, xml]
----
<view-state id="lichtbildAnzeigenViewState" model="maskenModel">
   <on-entry>
      <evaluate expression="basisController.showModalDialog()"/>
   </on-entry>

   ...

   <transition on="schliesseModalenDialog" to="gesamtauskunftAnzeigenViewState">
      <evaluate expression="basisController.hideModalDialog()"/>
   </transition>

</view-state>
----

Um im Hintergrund weiterhin das aktuelle Fenster anzuzeigen, genügt es den bisherigen View-State entsprechend zu vererben.

[[dialoge-ohne-javascript]]
==== Dialoge ohne JavaScript

image::image77.png[image,width=35,height=33]

Hat ein Benutzer kein JavaScript, werden Dialoge in das Hauptfenster integriert.

:desc-image-keinjavascriptdialog: Kein JavaScript – Dialog
[id="image-keinjavascriptdialog",reftext="{figure-caption} {counter:figures}"]
.{desc-image-keinjavascriptdialog}
image::image78.png[align="center", width="629",height="525"]

:desc-image-keinjavascriptmeldung: Kein JavaScript – Meldungsdialog
[id="image-keinjavascriptmeldung",reftext="{figure-caption} {counter:figures}"]
.{desc-image-keinjavascriptmeldung}
image::image79.png[align="center", width="629",height="526"]

:desc-image-keinjavascriptwizard: Kein JavaScript – Wizard
[id="image-keinjavascriptwizard",reftext="{figure-caption} {counter:figures}"]
.{desc-image-keinjavascriptwizard}
image::image80.png[align="center", width="629",height="525"]

*Hinweise zur Implementierung*

Die modalen Dialoge werden automatisch in das Layout integriert sofern kein JavaScript verfügbar ist.

==== Meldungsdialoge

Meldungsdialoge werden eingesetzt, wenn der Benutzer in seinem Arbeitsablauf unterbrochen werden muss.

:desc-image-meldungsdialogobjloeschen: Meldungsdialog – Objekt löschen
[id="image-meldungsdialogobjloeschen",reftext="{figure-caption} {counter:figures}"]
.{desc-image-meldungsdialogobjloeschen}
image::image82.png[align="center", width="329",height="163"]


:desc-image-aufbaumeldungsdialog: Aufbau Meldungsdialog
[id="image-aufbaumeldungsdialog",reftext="{figure-caption} {counter:figures}"]
.{desc-image-aufbaumeldungsdialog}
image::image83.png[align="center", width="325",height="162"]


*Hinweise zur Implementierung*

Für Meldungsdialoge gibt es derzeit keine Umsetzung.
Bei Bedarf können diese über die normalen modalen Dialoge umgesetzt werden (Dialoge).

[[wizard]]
==== Wizard

Mit „Wizard", auch Assistent genannt, wird eine geführte Abfolge von Interaktionsschritten bezeichnet.

:desc-image-dialogwizard1: Beispiel eines Dialog Wizards
[id="image-dialogwizard1",reftext="{figure-caption} {counter:figures}"]
.{desc-image-dialogwizard1}
image::image88.png[align="center", scaledwidth="96%"]


*Hinweise zur Implementierung*

Der Wizard ist in der plis-web ab Version 3.1.x verfügbar. Wizards werden mit dem Tag <isy:wizard> definiert.

Folgende Parameter sind zulässig:

* wizardDialogModel: Das Model des Wizards
* width: Die Breite des modalen Dialogs (optionale Angabe)
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig


Der Wizard besitzt folgende Facets:

* wizardHeader: Der Header-Bereich
* wizardBody: Der Body-Bereich
* modalFooter: Der Footer-Bereich
* wizardFooterRightButtons: Ergänzungen zu den angezeigten Buttons auf der linken Seite
* wizardFooterLeftButtons: Ergänzungen zu den angezeigten Buttons auf der rechten Seite

Beispiel:
[source, xml]
----
<isy:wizard wizardDialogModel="#\{wdm}">
   <f:facet name="wizardHeader">Testheader</f:facet>
   <f:facet name="wizardBody">
       <ui:param name="aktuelleWizardSeite" value="#\{wdm.getActiveWizardDialogPage()}" />
       <!-- In Abhängigkeit der ID werden die entsprechenden Seiten angezeigt. -->
       <ui:fragment rendered="#\{wdm.getActiveWizardDialogPageId().equals('1')}">
          <ui:include src="page1.xhtml" />
       </ui:fragment>
       <ui:fragment rendered="#\{wdm.getActiveWizardDialogPageId().equals('2')}">
          <ui:include src="page2.xhtml" /> </ui:fragment>
       <ui:fragment rendered="#\{wdm.getActiveWizardDialogPageId().equals('3')}">
          <ui:include src="page3.xhtml" />
       </ui:fragment>
       <ui:fragment rendered="#\{wdm.getActiveWizardDialogPageId().equals('4')}">
          <ui:include src="page4.xhtml" />
       </ui:fragment>
   </f:facet>
</isy:wizard>
----
Eine einzelne Seite eines Wizards wird über ein WizardDialogPage-Objekt definiert.
Eine WizardDialogPage hat u.A. folgende Attribute:

* wizardDialogPageId: Eine ID, welche die Wizardseite eindeutig innerhalb des Wizards identifiziert
* pageDone: Seite wurde abgearbeitet
* pageSuccessful: Seite wurde erfolgreich oder nicht erfolgreich abgearbeitet
* pageDisabled: Seite wurde deaktiviert
* buttonCancelActivated: Ob der Button aktiviert ist oder nicht
* buttonPreviousActivated: Ob der Button aktiviert ist oder nicht
* buttonAbortActivated: Ob der Button aktiviert ist oder nicht
* buttonCompleteActivated: Ob der Button aktiviert ist oder nicht
* buttonNextActivated: Ob der Button aktiviert ist oder nicht
* title: Title der Wizardseite

Weiterhin muss zu einem Wizard ein WizardDialogModel-Objekt definiert werden. Ein WizardDialogModel hat folgende Attribute und Methoden:

* activeWizardDialogPageId: Die ID der aktuell aktiven Seite
* nextActiveWizardDialogPageId: Die ID der neuen Seite
* wizardDialogPages: Liste von den einzelnen Seiten des Wizards (WizardDialogPage-Objekte)
* public boolean isPageDone(String id): Ob die Seite mit der angegebenen ID schon abgearbeitet wurde.
* public boolean isPageDisabled(String id): Ob die Seite mit der angegebenen ID deaktiviert ist.
* public WizardDialogPage getActiveWizardDialogPage(): Gibt die momentan aktive Seite zurück.
* public WizardDialogPage getWizardDialogPage(String wizardDialogPageId): Gibt die Seite zur angegebenen ID zurück.

Für die Verwendung eines Wizards muss ein Controller erstellt werden, der vom `WizardDialogController` erbt.
Folgende Methoden müssen dabei überschrieben werden:

* public boolean finish(WizardDialogModel model): Beendet die Verarbeitung des Wizards
* public boolean cancel(WizardDialogModel model): Bricht die Verarbeitung ab

Folgende Methoden können genutzt und optional überschrieben werden:

* initializeDefaultPages(WizardDialogModel model): Initialisiert die Pages des Wizards mit dem Standardverhalten
* public boolean next(WizardDialogModel model): Rufe nächste Seite auf
* public boolean previous(WizardDialogModel model): Rufe vorherige Seite auf

[[drucklayout]]
=== Drucklayout

Wenn Daten aus der Applikation gedruckt werden sollen, muss der Inhalt für den Druck optimiert werden.
Die Definitionen des Druck-Layouts können über ein CSS Druck-Stylesheet geregelt werden.
Zum Beispiel sollten nicht benötigte Elemente ausgeblendet und Farben für den Druck optimiert werden.


:desc-image-seitendruck1: Seitendruck über Druck-Funktion des Browsers
[id="image-seitendruck1",reftext="{figure-caption} {counter:figures}"]
.{desc-image-seitendruck1}
image::image96.png[align="center", scaledwidth="96%"]


*Hinweise zur Implementierung*

Für jede Seite besteht die Möglichkeit eine generische Druckansicht anzuzeigen.
Diese Druckansicht kann in einem eigenene View-State definiert werden.
Durch Aufruf des BasisControllers wird sie aktiviert oder deaktiviert.

Beispiel:
[source, xml]
----
<view-state id="auskunftAnzeigenDruckansichtViewState" model="auskunftAnzeigenModel">
    <on-entry>
       <evaluate expression="basisController.showPrintView()"/>
    </on-entry>
</view-state>
----

Über den Vererbungsmechanismus zwischen XHTML Seiten oder durch Angabe einer spezifischen View kann dadurch die komplette Seite in eine Druckansicht versetzt werden.
In der Druckansicht werden alle Elemente ohne JavaScript angezeigt und das Format entsprechend angepasst.
Mit der Druckfunktion des Browsers kann diese dann ausgedruckt werden.
Ruft man die Druckfunktion des Browsers direkt auf (ohne zuvor auf die Druckansicht geöffnet zu haben), so wird nur das angepasste CSS (print.css) verwendet.
Es erfolgen keine spezifischen Anpassungen von Elementen (z.B. alle Tabs anzeigen).

Das Tag `<isy:print-metainformation>` kann benutzt werden, um Metainformationen zum Druck anzuzeigen.
Der Inhalt dieses Tags wird nur ausgegeben, sofern die Druckansicht aktiviert ist.
Es enthält folgende Parameter:

* warning: Ein Text, welcher ausgegeben werden soll, falls ein Nutzer die Druckfunktion des Browsers nutzt, jedoch nicht die Druckansicht aktiviert hat.
Standard: leer.

[[drucken-bestimmter-inhaltesbereiche]]
==== Drucken bestimmter Inhaltsbereiche

Neben der allgemeinen Druck-Funktion des Browsers kann der Benutzer über explizite Drucken-Buttons bestimmte Bereiche ausdrucken.

:desc-image-darstellungapplication: Tabelle – Darstellung in Applikation
[id="image-darstellungapplication",reftext="{figure-caption} {counter:figures}"]
.{desc-image-darstellungapplication}
image::image97.png[align="center", scaledwidth="100%",width="627",height="272"]

:desc-image-darstellungdruckoption: Tabelle – Darstellung in Druckvorschau
[id="image-darstellungdruckoption",reftext="{figure-caption} {counter:figures}"]
.{desc-image-darstellungdruckoption}
image::image98.png[align="center", scaledwidth="100%",width="629",height="385"]

:desc-image-detaildarstellungapplication: Detailseite – Darstellung in Applikation
[id="image-detaildarstellungapplication",reftext="{figure-caption} {counter:figures}"]
.{desc-image-detaildarstellungapplication}
image::image99.png[align="center", scaledwidth="100%",width="629",height="405"]

:desc-image-darstellungdetaildruck: Detailseite – Darstellung in Druckvorschau
[id="image-darstellungdetaildruck",reftext="{figure-caption} {counter:figures}"]
.{desc-image-darstellungdetaildruck}
image::image100.png[align="center", scaledwidth="100%",width="500",height="773"]


*Hinweise zur Implementierung*

Für eine spezifische Druckansicht von Komponenten kann über einen eigenen View-State die generische Druckansicht (siehe Drucklayout) verwendet werden.
Alternativ dazu können die Inhalte der Druckansicht auch selbst definiert und optimiert werden.
Zur Prüfung ob die Druckansicht aktiviert wurde dient das BasisModel.

==== Schnellnavigation 

*NOCH NICHT IMPLEMENTIERT*

Optional kann sich zur schnellen Navigation zwischen mehreren Ergebnissen ein Control zentriert in der Seiten-Toolbar befinden.
Es besteht aus Zurück- und Vor-Buttons, die durch die Anzeige der aktuellen Position und der Gesamtmenge getrennt sind.
Die Gesamtmenge entspricht der Anzahl der Objekte in der dahinterliegenden Übersichtsliste.

== Bedienelemente

*MRO Vorbemerkung*

Funktionalität ohne JavaScript
Viele heutzutage übliche Bedienelemente, Gestaltungslösungen und Komfortfunktionen für
Webapplikationen setzen die Benutzung von JavaScript voraus. Ohne die Verwendung von
JavaScript sind die Möglichkeiten der Benutzerinteraktion mit Webseiten demzufolge stark
eingeschränkt.


*Hinweise zur Implementierung*

Bedienelemente werden JSF Composite Components zur Verfügung gestellt.
Durch das Einbinden des JSF Namespace `xmlns:isy="http://java.sun.com/jsf/composite/isyfact`" können die JSF-Komponenten der IsyFact-Web Bibliothek in die Anwendung eingebunden werden.

Komponenten stellen im Grundsatz folgendes sicher:

* JavaScript Kompatiblität: Komponenten bieten eine Fallback-Lösung an, falls kein JavaScript aktiviert ist.
* Druckfunktion Kompatibilität: Komponenten stellen eine Druckansicht zur Verfügung, falls die Druckansicht aktiviert wurde.
* Validierung: Die speziellen Formularkomponenten stellen Validierungsfunktionen zur Verfügung, sodass bei Validierungsfehlern automatisch Nachrichten und Tooltips (inkl.
Abwärtskompatibilität falls kein JavaScript aktiviert wurde) gerendert werden.

Abweichungen zu diesen Vorgaben können im Spezialfall möglich sein.

=== Button

*Hinweise zur Implementierung Button*

Ein einfacher Button wird über das Tag `<isy:button>` eingebunden.

Folgende Parameter sind zulässig:

* action: Die auszuführende Aktion.
* styleClass: Die zu ergänzenden Style-Klassen.
* value: Das Label des Buttons.
* disabled: Ob der Button deaktivert ist oder nicht.
* ajax: AJAX: Ob die Aktion per AJAX ausgeführt werden soll oder nicht (seit 3.1.x)
* execute: AJAX: Welches Form ausgeführt werden soll.
* render: AJAX: Welche Elemente gerendert werden sollen.
* block: AJAX: Ob ein Klick die GUI blockieren soll bis das Ergebnis eingetroffen ist.
* showPrintView: Ein spezifisches Flag zur Erkennung der Druckansicht, falls notwendig (seit 3.1.x).
* defaultAction: Ob der Button der Default-Button sein soll. (seit 4.0.x)
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig


Wenn JavaScript aktiviert ist, dann wird die AJAX-Action durchgeführt.
Andernfalls wird immer ein Full-Page-Reload durchgeführt.
Mehrere Buttons

Mehrere Buttons können in einer Zeile gruppiert werden, indem sie in das Tag `<isy:buttonRow>` eingeschlossen werden.

Folgende Parameter sind für das Tag <isy:buttonRow> zulässig:

* alignRight: Ob die Button Row eine Alignment nach Rechts besitzen soll oder nicht. Standard: false
* alignLeft: Ob die Button Row ein Alignment nach Links besitzen soll oder nicht. Standard: false Mehrere Aktionen

(Seit 3.1.x) In bestimmten Fällen kann es notwendig sein mehrere Formulare an den Server zu senden, um bestimmte Aktionen auszuführen (z.B. das Formular für den Inhaltsbereich soll auch beim Klick auf Drucken in der Seitentoolbar übermittelt werden). Dies kann durch verwenden des Tags `<isy:buttonInjectPost>` erreicht werden.
Dadurch lässt sich eine andere Aktion vor der eigentlichen Aktion des Buttons innerhalb des Tags ausführen.

Folgende Parameter sind zulässig:

* postButton: Enthält die ID des Buttons, der die zusätzliche POST-Aktion durchführen soll.
* continueAfterPost: Über diesen Wert true/false kann gesteuert werden, ob nach der POST-Aktion auch tatsächlich der eigentliche Button geklickt werden soll (z.B. um Fehlerfälle abzufangen).

=== Toolbar Button


*Hinweis zur Implementierung*

image::image136.png[image,width=15,height=15]

Implementierung in JSF / plis-web

Ein Toolbar Button wird über das Tag `<isy:buttonToolbar>` eingebunden.

Folgende Parameter sind zulässig:

* action: Die auszuführende Aktion.
* value: Das Label des Buttons. Standard: leer
* disabled: Ob der Button deaktiviert sein soll oder nicht.
Standard: false
* icon: Das Icon aus der Icon-Bibliothek (ohne Präfix 'icon-'). Standard: placeholder
* showIcon: Ob ein Icon angezeigt werden soll oder nicht. Standard: true
* reverseIconPosition: Ob das Icon rechts angezeigt werden soll. Standard: false.
* execute: AJAX: Welches Felder ausgewertet werden sollen. Standard: @form
* render: AJAX: Welcher Teilbereich aktualisiert werden soll. Standard: @form
* globalConfig: Eine spezifische globale Konfiguration, falls nötig


Wenn JavaScript aktiviert ist, dann wird die AJAX-Action durchgeführt.
Andernfalls wird immer ein Full-Page-Reload durchgeführt.
Folgende Action-Sources werden bereitgestellt:

* buttonActionEvent: Das Action Event für den Button.

==== Menü Button

*Hinweise zur Implementierung*

Derzeit noch nicht realisiert.

[[toggle-button]]
==== Toggle Button


*Hinweise zur Implementierung*

Implementierung in JSF / plis-web

(Seit 3.1.x) Ein Toggle-Button wird über das Tag `<isy:buttonToggle>` eingebunden.

Folgende Parameter sind zulässig:

* action: Die auszuführende Aktion.

* value: Das Label des Buttons.

* icon: Das Icon aus der Icon-Bibliothek (ohne Präfix 'icon-').

* showIcon: Ob das Icon angezeigt werden soll oder nicht.
Standard: true

* disabled: Ob der Button deaktivert ist oder nicht.

* reverseIconPosition: Ob das Icon rechts angezeigt werden soll.
Standard: false

* active: Ob der Button ausgewählt sein soll, also aktiv ist.
Standard: false

* execute: AJAX: Welches Form ausgeführt werden soll.

* render: AJAX: Welche Elemente gerendert werden sollen.

* showPrintView: Ein spezifisches Flag zur Erkennung der Druckansicht, falls notwendig.

* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.


Folgende Action-Sources werden bereitgestellt:


* toggleButton: Das Action Event für den Button.

[[icon-button]]
==== Icon Button


*Hinweise zur Implementierung*

Ein Button mit Icon wird über das Tag `<isy:buttonIcon>` eingebunden.

Folgende Parameter sind zulässig:

* action: Die auszuführende Aktion.
* value: Das Label des Buttons. Standard: leer
* disabled: Ob der Button deaktivert ist oder nicht. Standard: false
* size: Die Größe des Icons. Mögliche Werte: small/large. Standard: large
* icon: Der Suffix des zu verwendenden Icons. Standard: placeholder
* showIcon: Ob das Icon angezeigt werden soll oder nicht. Standard: true
* tooltip: Browser-Tooltip, der über dem Icon angezeigt werden soll.
* execute: AJAX: Welches Form ausgeführt werden soll. Standard: @form.
* render: AJAX: Welche Elemente gerendert werden sollen. Standard: @form.
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.

Folgende Action-Sources werden bereitgestellt:

* buttonActionEvent: Das Action Event für den Button.

Wenn JavaScript aktiviert ist, dann wird die AJAX-Action durchgeführt.
Andernfalls wird immer ein Full-Page-Reload durchgeführt.

[[hyperlink-ueberschrift]]
==== Hyperlink

Hyperlinks sind verlinkte Texte (oder auch Grafiken), die im Wesentlichen als Navigations-Mechanismus dienen – so z.B. um andere Inhalte wie Fenster zu öffnen.
Ebenso können Hyperlinks dazu eingesetzt werden, Funktionen aufzurufen.


*Hinweise zur Implementierung*

Links können mit dem Standard-HTML Tag <a...> oder durch Nutzung des JSF Tags <h:outputLink/> erzeugt werden.

_Hinweis:_ Auch die Nutzung des JSF Tags können <h:commandLink /> ist möglich.
Jedoch ist die Funktionalität nur bei aktiviertem JavaScript nutzbar.
Entsprechende Fallbackmaßnahmen müssen also getroffen werden.

(Seit 3.1.x) Falls ein Hyperlink Aktionen im Webflow, bzw.
JSF Ausführen soll, so kann das Tag `<isy:hyperlink>` verwendet werden.
Dieses Tag stellt sicher, dass falls JavaScript deaktiviert ist, ein Button mit Layout eines Links dargestellt wird.

Das Tag hat folgende Parameter:

* action: Die Action, die ausgeführt werden soll.
* value: Das Label des Links.

* title: Der Alternativtext.

* baseStyleClass: Die Basistyleklasse zum Überschreiben.

* additionalStyleClass: Zusätzliche Styleklassen.

* openInNewTab: Ob der Link in einem neuen Tab geöffnet werden soll.
Funktioniert nur mit aktiviertem JavaScript.


Das Tag stellt folgende ActionSource bereit:

* hyperlink: Die ActionSource des Links.

[[label-ueberschrift]]
==== Label

Ein Label besteht in der Regel aus einem Text.
In manchen Fällen kann es auch eine Kombination aus einem Icon und einem Text sein (z.B. Buttons mit Icon und Text). Es gibt auch Bedienelemente deren Label ausschließlich aus einem Icon bestehen.


*Hinweise zur Implementierung*

Für reine Labels existieren keine spezifischen JSF-Komponenten.
Das Standard-JSF Tag <h:outputText/> kann verwendet werden.

Für formularbasierte Masken werden automatisch Labels für Eingabefelder erzeugt.
Siehe auch Formulareingabefelder.

(Seit 3.1.x) Für das Ausgeben eines Textes (mit zugehörigem Label) in einem Formular kann das Tag `<isy:formLabel>` verwendet werden.

Es besitzt folgende Parameter:

* reference: Die Referenz des Objekts für die Validierung

* value: Der Text für das Ausgabelabel.

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label.
Standard: col-lg-6

* inputStyleClass: Die CSS-Klasse für den Ausgabebereich.
Standard: col-lg-6

* textStyleClass: Die CSS-Klasse für den auszugebenden Text.

* tooltip: Der Tooltip für das Ausgabelabel.

* breakWords: Erlaubt das Deaktivieren des Wrappings von Text innerhalb der Komponente.

* converter: Die JSF-Converter-ID, welche die Ausgabe in einen Text konvertiert.

* globalConfig: Eine spezifische globale Konfiguration, falls benötigt.

[[eingabefelder-ueberschrift]]
=== Eingabefelder

Ein Eingabefeld dient der Eingabe von Text durch den Benutzer.
Ein Eingabefeld ist in der Regel einzeilig.


*Hinweise zur Implementierung*

Für einzelne Eingabefelder existieren derzeit noch keine einfachen Komponenten.
Um ein einfaches Eingabefeld einzufügen kann das JSF-Tag `< h:inputText/>` mit den Bootstrap-Klassen form-control verwendet werden.
Für formularbasierte Eingaben existiert das Tag `<isy:formInput/>`, welches ein Eingabefeld in einem Formularlayout mit Label kapselt.
Nähere Informationen hierzu finden sich im Formularkapitel.

Folgende Parameter sind zulässig:

* reference: Die Referenz des Objekts

* value: Der Wert für das Databinding im Eingabefeld

* required: Ob die Eingabe ein Pflichteingabe ist

* readonly: Ob die Darstellung nur lesend erfolgen soll

* label: Der Text für das Label

* labelStyleClass: Die CSS-Klasse für das Label

* inputStyleClass: Die CSS-Klasse für den Eingabebereich.

* placeholder: Der Platzhalter, welcher im Eingabefeld angezeigt wird

* inputmask: Die Eingabemaske

* inputmaskInsertMode: Die Eingabemaske: ob text soll überschrieben werden beim eintippen

* maxlength: Die maximale Länge der Eingabe

* width: Die maximale Breite des Eingabefeldes.

* showPrintView: Zur aktuellen Druckansicht-Anzeige aus dem BasisModel

* tooltip: Tooltip.

* validationModel: Ein spezifisches Validation-Model, falls benötigt.

* globalConfig: Eine spezifsche globale Konfiguration, falls benötigt.

* charpicker: Die Referenz des Objekts.

* contentRight: Der Inhalt der rechts vom Listpicker angezeigt wird

* type: Der Typ des Eingabefelds, so dass diese Komponente z.B. auch für Passwort-Felder verwendet werden kann.
Mögliche Werte alle Werte für das Feld type des HTML Input Felds
* fourEyesMode: 4 Augen Prinzip Mode (locked, unlock)

* fourEyesLastValue: 4 Augen Prinzip Mode (locked, unlock)


[[aktionseingabefeld]]
==== Aktionseingabefeld

:desc-image-aktionseingabefeld: Aktionseingabefeld
[id="image-aktionseingabefeld",reftext="{figure-caption} {counter:figures}"]
.{desc-image-aktionseingabefeld}
image::image155.png[align="center", width="685",height="25"]


*Hinweise zur Implementierung*

Die Implementierung erfolgt über das Tag `<isy:actionInput>` bzw. `<isy:formActionInput>`. 

Folgende Parameter sind für `<isy:action Input>` zulässig:

* reference: Die Referenz des Objekts.
* value: Der anzuzeigende Wert als `String`.

* placeholder: Der Platzhalter, welcher im Eingabefeld angezeigt wird.

* action: Die auszulösende Aktion, beim Klicken aufs Icon. Wird ignoriert im Falle von `mode = input-only`.

* icon: Das benutzte Icon aus dieser
https://getbootstrap.com/docs/3.3/components/[Glyph-Icons-Liste]
, nur der Suffix, z.B. `search.`

* iconColor: Die Farbe des Icons, per Default `#45484D`.

* mode: Eins aus `normal` für Inputfeld und Icon aktiv, `button-only` für nur Icon aktiv und `input-only` für nur Inputfeld aktiv.

* tooltip: Einen optionalen Tooltip für das Icon.

* disabled: Ob das Inputfeld deaktiviert ist oder nicht.

* fourEyesMode: 4 Augen Prinzip Mode (locked, unlock).

* fourEyesLastValue: 

* inputStyleClass: Die zu ergänzenden Style-Klassen.


Folgende Parameter sind zusätzlich zu den eben genannten für `<isy:formActionInput>` zulässig:

* required: Ob die Eingabe ein Pflichteingabe ist.

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label.

* maxlength: Die maximale Länge der Eingabe.

* validationModel: Ein spezifisches Validation-Model, falls benötigt.

* globalConfig: Eine spezifsche globale Konfiguration, falls benötigt.

[[eingabefelder-fuer-geldbetraege]]
==== Eingabefeld für Geldbeträge

Im Vergleich zu `<isy:formInput>` nimmt diese Komponente nur die Eingabe von Zahlen und Kommas entgegen.

Beim Verlassen des Feldes Wird die eingegebene Zahl in eine Zahl mit zwei Nachkommastellen umgewandelt.

*Zustände*

Wie bei `<isy:formInput>`.

*Ist dies das korrekte Bedienelement?*

CurrencyInput wird verwendet, wenn ein Währungsbetrag eingegeben werden soll.

*Hinweise zur Implementierung*

Die Implementierung erfolgt über das Tag `<isy:formCurrencyInput>`. Folgende Parameter sind zulässig:

* reference: Die Referenz des Objekts.

* value: Der Wert für das Databinding im Eingabefeld.

* required: Ob die Eingabe ein Pflichteingabe ist.

* readonly: Ob die Darstellung nur lesend erfolgen soll.

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label.

* inputStyleClass: Die CSS-Klasse für den Eingabebereich.

* placeholder: Der Platzhalter, welcher im Eingabefeld angezeigt wird.

* maxlength: Die maximale Länge der Eingabe.

* validationModel: Ein spezifisches Validation-Model, falls benötigt.

* globalConfig: Eine spezifsche globale Konfiguration, falls benötigt.

* onblur: onblur JavaScript-Funktion wird aufgerufen, wenn der Cursor das Feld verlässt.

* onkeyup: onkeyup JavaScript-Funktion wird aufgerufen, wenn eine Tastatureingabe in dem Feld gemacht wurde.

* fourEyesMode: 4 Augen Prinzip Mode (locked, unlock).

* fourEyesLastValue:

* alignright: Ob der Text innerhalb des Eingabefeldes rechts ausgerichtet sein soll. Default ist false.



[[upload]]
==== Upload

kein Implementierungshinweis


[[text-box]]
=== Text Box

Text Boxen sehen optisch aus wie Eingabefelder, es können jedoch mehrzeilige Daten eingegeben werden.

:desc-image-bildtextbox: Text Box
[id="image-bildtextbox",reftext="{figure-caption} {counter:figures}"]
.{desc-image-bildtextbox}
image::image163.png[align="center", width="358",height="111"]


*Hinweise zur Implementierung*

Eine Textbox kann über das HTML <textarea> mit Bootstrap Klasse form-control eingebunden werden.

(Seit 3.1.x) Für Formulare kann das Tag `<isy:formTextarea>` verwendet werden.
Folgende Parameter sind zulässig:

* reference: Die Referenz des Objekts für die Validierung
* value: Der Wert für das Databinding im Eingabefeld
* required: Ob die Eingabe ein Pflichteingabe ist. Standard: false
* disabled: Ob die Komponente aktiviert ist oder nicht. Standard: false
* readonly: Ob nur lesend auf das Feld zugegriffen werden kann. Standard: false
* label: Der Text für das Label.
* labelStyleClass: Die CSS-Klasse für das Label. Standard: col-lg-6
* inputStyleClass: Die CSS-Klasse für den Eingabebereich. Standard: col-lg-6
* textareaStyleClass: Die CSS-Klasse für die Textarea.
* tooltip: Der anzuzeigende Tooltip
* rows: Die Anzahl an Zeilen.
* cols: Die Anzahl an Spalten.
* maxlength: Die maximal Anzahl von Zeichen
* showPrintview: Ein spezifisches Flag zur Erkennung der Druckansicht, falls notwendig.
* validationModel: Ein spezifisches Validation-Model, falls benötigt
* globalConfig: Eine spezifische globale Konfiguration, falls benötigt

[[dropdown-menue]]
=== Dropdown Menü

Mit einem Dropdown Menü kann der Benutzer per Mausklick oder Tastatur-Bedienung genau einen Wert aus einer Liste von Optionen auswählen.

:desc-image-bildddropdownmenue: Dropdown Menü
[id="image-bildddropdownmenue",reftext="{figure-caption} {counter:figures}"]
.{desc-image-bildddropdownmenue}
image::image166.png[align="center", width="627",height="156"]


*Hinweise zur Implementierung*

Ein Dropdown Menü wird über das Tag `<isy:selectOneDropdown>` eingebunden.
Für Formulareingaben existiert das Tag `<isy:formSelectOneDropdown>`.

Folgende Parameter sind zulässig:

* reference: Die Referenz des Objekts

* referenceId: Der Wert der id

* value: Der Wert der Auswahl für das Databinding

* invalid: Ob die Auswahl invalide ist oder nicht 

* disabled: Ob die Auswahl deaktiviert ist oder nicht

* title: Das Tooltip über dem SelectOneDropdown

* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.

* dropdownStyleClass: Die CSS-Klasse für das Dropdownmenü

* readonly: Ob die Darstellung nur lesend erfolgen soll

* disabled: Ob die Auswahl deaktiviert ist oder nicht

* fourEyesMode: 4 Augen Prinzip Mode (locked, unlock)

* fourEyesLastValue: 4 Augen Prinzip Mode (locked, unlock)

* valueChangeListener: Die Methode, die bei einem ValueChange aufgerufen

* converter: Konverter-Bean für die angezeigten Elemente

* converterAttribute: Parameter für den Konverter


Für die Komponente formSelectOneDropdown gibt es zusätzlich die folgenden Paramter:

* label: Der Text für das Label

* labelStyleClass: Die CSS-Klasse für das Label

* inputStyleClass: Die CSS-Klasse für den Eingabebereich.
* validationModel: Ein spezifisches Validation-Model, falls benötigt.
* globalConfig: Eine spezifsche globale Konfiguration, falls benötigt.

Je nach JavaScript Aktivierung wird das Dropdown Menü über ein Bootstrap-Plugin (JavaScript aktiviert) oder als natives Element (JavaScript deaktiviert) dargestellt.

==== Tabs

Tabs dienen der Informationsstrukturierung und Reduktion der Anzahl gleichzeitig sichtbarer Inhaltsbereiche, wenn die Informationen schnell innerhalb des gleichen Fensters zugreifbar sein müssen.
Tabreiter verhalten sich entsprechend dem analogen Vorbild eines Karteireiters, der dazu dient, verschiedene Karteikarten voneinander zu trennen.
Tabs werden häufig dazu verwendet, um Eigenschaften eines Objekts in inhaltliche sinnvolle Gruppen aufzuteilen.

:desc-image-bildtabs: Tabs
[id="image-bildtabs",reftext="{figure-caption} {counter:figures}"]
.{desc-image-bildtabs}
image::image173.png[align="center", width="626",height="35"]


*Hinweise zur Implementierung*

Tabs werden über die Tags `<isy:tabGroup>`, `<isy:tabHeader>` und `<isy:tabContent>` eingebunden.
Im Folgenden ein Beispiel:

[source, xml]
----
<isy:tabGroup tabGroupId="testTab" globalTabContentRefs="A P S"
   globalTab="A" defaultTab="A"
   tabGroupModel="#\{jsfSteuerelementeModel.tabGroupModel}">

   <f:facet name="tabHeader">
      <isy:tabHeader value="Auskunft" name="A" />
      <isy:tabHeader value="Personalien" name="P" />
      <isy:tabHeader value="Sachverhalte" name="S" />

   </f:facet>
      <isy:tabContent name="A">Dies ist die Auskunft </isy:tabContent>
      <isy:tabContent name="P">Dies sind Personalien </isy:tabContent>
      <isy:tabContent name="S">Dies sind die Sachverhalte </isy:tabContent>

</isy:tabGroup>
----

Zunächst wird die Tabgruppe mit dem Tag `<isy:tabGroup>` allgemein definiert. Folgende Parameter sind zulässig:

* tabGroupModel: Das Model für die Tabgruppe. Sollte im Maskenmodel liegen.
* defaultTab: Der Name des Default-Tabs. Der Default-Tab ist beim initialen Öffnen aktiv.
* globalTab: Der Name des globalen Tabs.
* globalTabContentRefs: Die Liste an Namen der Tabs, welche beim Anzeigen des globalen Tabs auch angezeigt werden sollen.
* execute: AJAX: Welches Form ausgeführt werden soll. Standard: @form.
* render: AJAX: Welche Elemente gerendert werden sollen. Standard: @form.
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.


Wenn JavaScript aktiviert ist, dann wird die AJAX-Action durchgeführt.
Andernfalls wird beim Wechsel der Tabs ein Full-Page-Reload durchgeführt.

Einzelne Tabheader werden mit dem Tag `<isy:tabHeader>` definiert. Folgende Parameter sind zulässig:

* name: Der Name des Tabs, für welchen dieser Header definiert ist.
* value: Der Titel des Tabs zur Anzeige.
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.
* skipAction: Ob die übergebene action ausgelassen werden soll.
Default ist false, die action wird standardmäßig also ausgeführt. (seit 4.0.x)
* action: Die action kann überschrieben werden, um z.B. den aktuellen Reiter validieren zu können. (seit 4.0.x)

Inhalte von Tabs werden mit dem Tag `<isy:tabContent>` definiert. Folgende Parameter sind zulässig:

* name: Der Name des Tabs, zu welchem dieser Inhalt gehört.
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.
* preload: Ob das Tab im JS-Fall vorgeladen werden soll.
Default ist false, so dass nicht vorgeladen wird.

Erläuterung zu den Attributen preload und skipAction:

* Zwischen den beiden Attributen besteht eine Abhängigkeit.
Sie müssen immer den gleichen Wert aufweisen, ansonsten funktioniert der Tab nicht korrekt.
* Das Attribut preload legt fest, ob der Inhalt des Tabs beim Laden der gesamten Seite vorgeladen werden soll.
Bei einem Wechsel zwischen vorgeladenen Tabs muss dann entsprechend kein Server-Aufruf stattfinden.
In diesem Fall darf aber die action des tabHeader nicht ausgeführt werden, weil sonst doch ein Server-Aufruff stattfinden würde.
Dies würde sowohl unnötigen Netzwerkverkehr -, als auch unerwünschtes Verhalten bei der Tab-Auswahl hervorrufen.
* Standardmäßig stehen beide Werte auf false.
Wenn das Vorladen gewünscht ist, müssen beide Werte explizit auf true gesetzt werden.


[[taboverflow-menue]]
==== Taboverflow Menü

Das Taboverflow Menü dient zur Vermeidung mehrzeiliger Tabreiter-Elemente.
Das Menü enthält alle Tabs, die nicht direkt auf dem Screen angezeigt werden können.


*Hinweise zur Implementierung*

Diese Konzept wurde noch nicht realisiert.

[[liste-ueberschrift]]
=== Liste

Listen werden benutzt, um eine überschaubare Anzahl an Daten oder Objekten eines Typus übersichtlich und vergleichbar darzustellen.

:desc-image-listemitlistenkopf: Liste mit Listenkopf
[id="image-listemitlistenkopf",reftext="{figure-caption} {counter:figures}"]
.{desc-image-listemitlistenkopf}
image::image178.png[align="center", width="305",height="326"]


*Hinweise zur Implementierung*

(seit 4.0.x) Eine Liste mit Einfachauswahl wird mit dem Tag `<isy:formSelectOneList>` eingebunden.

Folgende Parameter sind zulässig:


* reference: Die Referenz des Objekts.

* value: Der Wert der Auswahl für das Databinding.

* disabled: Ob die Liste deaktiviert ist.

* size: Dieses Attribut wird im Sinne von bootstrap-selectlist.js interpretiert, d.h. es gibt die Anzahl der Zeilen die sichtbar sind an.

* checkboxed: Falls true werden zusätzlich zum highlighting, auch checkboxes angezeigt.

* required: Ob die Eingabe ein Pflichteingabe ist.

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label.

* inputStyleClass: Die CSS-Klasse für den Eingabebereich.

* validationModel: Ein spezifisches Validation-Model, falls benötigt.

* globalConfig: Eine spezifsche globale Konfiguration, falls benötigt.


(seit 4.0.x) Eine Liste mit Mehrfachauswahl wird mit dem Tag `<isy:formSelectManyList>` eingebunden.

Folgende Parameter sind zulässig:


* reference: Die Referenz des Objekts.

* value: Der Wert der Auswahl für das Databinding.

* disabled: Ob die Liste deaktiviert ist.

* size: Dieses Attribut wird im Sinne von bootstrap-selectlist.js interpretiert, d.h. es gibt die Anzahl der Zeilen die sichtbar sind an.

* checkboxed: Falls true werden zusätzlich zum highlighting, auch checkboxes angezeigt.

* required: Ob die Eingabe ein Pflichteingabe ist.

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label.

* inputStyleClass: Die CSS-Klasse für den Eingabebereich.

* validationModel: Ein spezifisches Validation-Model, falls benötigt.

* globalConfig: Eine spezifsche globale Konfiguration, falls benötigt.

[[tabelle-ueberschrift]]
=== Tabelle

Eine Tabelle dient der übersichtlichen Anzeige von größeren Datenmengen.
Die Tabelle besteht aus mehreren Informationsspalten, die zur Sortie rung verwendet werden können.

:desc-image-einfuehrungeinertabelle: Tabelle
[id="image-einfuehrungeinertabelle",reftext="{figure-caption} {counter:figures}"]
.{desc-image-einfuehrungeinertabelle}
image::image180.png[align="center", width="687",height="243"]

:desc-image-interaktivezeilen: Tabelle – Zustände interaktiver Zeilen
[id="image-interaktivezeilen",reftext="{figure-caption} {counter:figures}"]
.{desc-image-interaktivezeilen}
image::image181.png[align="center", width="687",height="93"]


*Hinweise zur Implementierung*

Die Umsetzung der Tabelle unterscheidet sich grundsätzlich zur Widgets wie der von JSF bereitgestellten <h:dataTable>. Die `<isy:dataTable>` ist näher am Layout einer eigentlichen Tabelle aufgebaut und dadurch flexibler nutzbar (z.B. dynamische Anzahl an Spalten). Dafür jedoch auch eine größere Konfiguration möglich.

Es existieren folgende Tags zur Konfiguration der `<isy:dataTable>`:


* <isy:dataTable>
* <isy:dataTableHeader>
* <isy:dataTableRowAllSelection>
* <isy:dataTableRows>
* <isy:dataTableCell>
* <isy:dataTableDetailButton>
* <isy:dataTableRowSelection>


Beispiel für die Definition einer `<isy:dataTable>`:

[source, xml]
----
<isy:dataTable dataTableModel="#\{...}"
    dataTableController="#\{...}"
    action="trefferlisteDoppelklick">
  <f:facet name="tableToolbar">

    <isy:buttonGroup>
       <isy:buttonToolbar .../>
    </isy:buttonGroup>
  </f:facet>

   <f:facet name="tableHeader">
      <isy:dataTableHeader name="Vorname" />
      <isy:dataTableHeader name="Nachname" />
      <isy:dataTableHeader name="Aktionen" />
   </f:facet>
   <isy:dataTableRows
      rowDefinition="/WEB-INF/gui/.../rowDefinition.xhtml"
      detailDefinition="/WEB-INF/gui/.../detailDefinition.xhtml" />

</isy:dataTable>
----
Die grundlegende Basis bildet das `<isy:dataTable>` Tag.
Folgende Parameter sind zulässig:


* dataTableModel: Das zugehörige, spezifische DataTableModel.
Das Model muss Teil des Maskenmodels sein.
Das Model enthält eine Liste an DataTableItems (die konkreten Datensätze).

* dataTableController: Der zugehörige, spezifische DataTableController. Der Controller stellt z,B. Suchfunktionalität bereit.

* selectable: Ob die Datatable selektierbar ist oder nicht. Standard: false.

* selectionMode: Der Selektionsmodus der Zeilen (single/multiple). Standard: multiple.

* action: Die Aktion, welche beim Doppelklick auf eine Zeile ausgeführt wird.

* execute: AJAX: Das Form, welches beim Doppelklick ausgeführt werden soll. Standard: @form.

* render: AJAX: Das Form, welches beim Doppelklick gerendert werden soll. Standard: @form.

* globalConfig: Die spezifische globale Konfiguration, falls notwendig.


In der JSF-Facet tableToolbar werden Listen von `<isy:buttonGroup>` Tags erwartet.
Die Listen können jeweils Elemente der Typen `<isy:buttonToolbar>` (Button in der Toolbar, siehe Toolbar Button) und `<isy:buttonToggle>` (Toggle-Button in der Toolbar der Tabelle) enthalten. Folgende Parameter sind für das Tag `<isy:buttonToggle>` zulässig:


* action: Die auszuführende Aktion.
* value: Das Label des Buttons. Standard: leer
* icon: Das Icon aus der Icon-Bibliothek (ohne Präfix 'icon-'). Standard: placeholder
* showIcon: Ob ein Icon angezeigt werden soll oder nicht. Standard: true
* reverseIconPosition: Ob das Icon rechts angezeigt werden soll. Standard: false.
* disabled: Ob der Button deaktiviert sein soll oder nicht. Standard: false
* execute: AJAX: Welches Felder ausgewertet werden sollen. Standard: @form
* render: AJAX: Welcher Teilbereich aktualisiert werden soll. Standard: @form
* globalConfig: Eine spezifische globale Konfiguration, falls nötig


In der JSF-Facet tableHeader wird eine Liste von `<isy:dataTableHeader>` Tags erwartet.
Ein Tag entspricht dabei einem Titel einer Spalte.
Folgende Parameter sind zulässig:

* name: Der Header-Name / Spaltenüberschrift.
* sortable: Ob der Header sortierbar ist oder nicht.
Standard: false.
* sortAttribute: Das zugehörige Sortierattribut, falls der Header sortierbar ist.
_*(Für plis-web Versionen kleiner als 4.0)*_
* sortProperty: Das zugehörige Sortierattribut, falls der Header sortierbar ist.
_*(Ab plis-web 4.0)*_
* width: Die Breite der Spalte.


Die Zeilen der Datentabelle werden mit dem Tag `<isy:dataTableRows>` definiert. Folgende Parameter sind zulässig:

* rowDefinition: Pfad zur XHTML-Seite für Zeilen
* detailDefinition: Pfad zur XHTML-Seite für die Detailansicht


Beispiel einer Row-Definition:
[source, xml]
----
<ui:composition ...
   <isy:dataTableCell> #\{dataTableItem.vorname}</isy:dataTableCell>
   <isy:dataTableCell> #\{dataTableItem.nachname}</isy:dataTableCell>
   <isy:dataTableCell>
      <isy:dataTableDetailButton dataTableModel="#\{...}" dataTableController="#\{...}" />
       _*(Für plis-web Versionen kleiner als 4.0)*_
       <isy:dataTableDetailButton/>
       _*(Ab plis-web 4.0)*_
    </isy:dataTableCell>

</ui:composition>
----

Die Row-Definition wird für jeden Datensatz in der Tabelle eingebunden.
Der UI-Parameter dataTableItem weist immer auf den aktuellen Treffer (also eine Objekt mit der Schnittstel DataTableItem). Mit diesem Parameter können dann für jede Spalte die `<isy:dataTableCell>` Tags eingebunden werden.
Die Inhalte dieser Tags repräsentieren den Inhalt der Tabellenzelle für diese Treffer.
Die Reihenfolge der Spalten werden durch die Headerdefinition festgelegt.
Das Tag `<isy:dataTableCell>` hat derzeit folgende Parameter:


* hidden: Ob die Spalte angezeigt werden soll oder nicht.
Standard: true.

Die Einbindung der Row-Definition erfolgt mittels dem JSF Tag `<ui:repeat>`. Als Statusvariable wird dataTableItemRepeatStatus verwendet.
Auch auf diese Variable kann innerhalb der Row-Definition zugegriffen werden.

Zur Vereinfachung des Aufrufs der Detailansicht, wird das Tag `<isy:dataTableDetailButton>` angeboten.
Dieses Tag rendert einen Button und öffnet die Detailansicht eines Treffers.
Die Detailansicht eines Treffers befindet sich an der im Tag `<isy:dataTableRows>` angegebenen Stelle.

Beispiel einer Detail-Definition:
[source, xml]
----
<ui:composition ...
   <td colspan="2">
     <div class="form-horizontal readonly">
      <div class="row row-df">
        <div class="col col-lg-6">
          <isy:formLabel reference="aktenzeichen"
             value="#\{dataTableItem.aktenzeichen}"
             label="#\{msg_currentflow.MEL_Trefferliste_Aktenzeichen}"/>
          <isy:formLabel reference="ordnungsnummer"
             value="#\{dataTableItem.ordnungsnummer}"
             label="#\{msg_currentflow.MEL_Trefferliste_Ordnungsnummer}"/>
          <isy:formLabel reference="speicherungsdatum"
             value="#\{dataTableItem.speicherungsdatum}"
             label="#\{msg_currentflow.MEL_Trefferliste_Speicherungsdatum}"/>
        </div>
      </div>
     </div>
   </td>
</ui:composition>
----

Die Detail-Definition enthält beliebigen Inhalt.
Im Beispiel ist dies ein Formular mit der Ausgabe von drei Labeln in der linken Hälfte der Tabelle.
Analog zur Row-Definition kann auf den aktuellen Treffer über die UI-Parameter dataTableItem udn dataTableItemRepeatStatus zugegriffen werden.

Details beispielsweise zur Sortierung oder des Selektionsverhaltens finden sich in den Unterkapiteln dieses Abschnitts.

*Migration von auf plis-web 4.0*

Mit plis-web Version wurde die Tabellenkomponente mit den Funktionen Paginierung, Filterung und Sortierung erweitert.
Die neue Implementierung ist nur bedingt kompatibel.
Folgende Schritte sind für die Migration notwendig.

*In der View:*

DataTable

* jsSortFunction: _entfällt._
* sortAttributeConverterId. _entfällt_

DataTableDetailButton

* dataTableMdel: _entfällt, wird nun automatisch ermittelt._
* dataTableController: _entfällt, wird nun automatisch ermittelt._

DataTableHeader

* sortAttribute: _entfällt, da nun sortProperty verwendet wird._
* sortProperty: __neu__, ersetzt das Attribut sortAttribute und ist nun ein String-Wert


DataTableRowAllSelection

* globalConfig: _entällt, wird nun automatisch ermittel._


**In der Java Implementierung**:

DataTableModel

* model.setSortDirection(sortDirection) : _entfällt, wurde in die Klasse SortModel verschoben._
* model.getSortModel().setDirection(direction): _neu, ersetzt_ setSortDirection
* model.setSortAttribute(sortAttribute): _entfällt, wird in der Klasse SortModel durch die Methode setProperty ersetzt._
* model.getSortModel().setProperty(property) : _neu, ersetzt setSortAttribute._

DataTableController

* readItems: _muss überschrieben werden._
* getItemById: _muss überschrieben werden_
* updateDisplayItems: _muss überschrieben werden.
Aus Kompatibilitätsgründen wird hier search und sortInvoked aufgerufen._
* sortInvoked: _entfällt / deprecated, aus Kompatibitätsgründen noch vorhanden._
* search: _entfällt / deprecated, aus Kompatibitätsgründen noch vorhanden._
* DataTableItem Typ muss als Parameter angegeben werden.

[[sortierung-tabelle]]
==== Sortierung in einer Tabelle

:desc-image-tabellesortierungimkopf: Tabelle – Sortierungs-Indikator in Tabellenkopf
[id="image-tabellesortierungimkopf",reftext="{figure-caption} {counter:figures}"]
.{desc-image-tabellesortierungimkopf}
image::image183.png[align="center", width="627",height="137"]


*Hinweise zur Implementierung*

Die `<isy:dataTable>` bietet Möglichkeiten zur Sortierung an.
Dazu müssen die einzelnen Spalten-Header über das `<isy:dataTableHeader>` Tag entsprechend konfiguriert werden.

*plis-web kleiner als 4.0*

Beispiel:
[source, xml]
----
<isy:dataTableHeader
   name="#\{msg_currentflow.MEL_Trefferliste_Vorname}"
   sortable="true"
   sortAttribute="#\{enumJsfConstants.NUMMERNSUCHE_SORTATTRIBUTE_VORNAME}" />
----

Durch Angabe von sortable=true werden automatisch Buttons und Symbole zur Sortierung hinzugefügt.
Bei Klick auf den Suchbutton wird im DataTableModel das SortAttribute festgehalten und im spezifischen Trefferlistencontroller die Methode sortInvoked(...) aufgerufen.
Je nach Anwendungsfall kann die Methode dann die Liste sortieren oder aber eine erneute Suche in der Datenquelle durchführen (z.B. bei paginierten Trefferlisten).

Auch die initiale Sortierung muss vom enstprechenden Trefferlistencontroller durchgeführt werden.

*Ab plis-web 4.0*
[source, xml]
----
<isy:dataTableHeader
   name="#\{msg_currentflow.MEL_Trefferliste_Vorname}"
   sortable="true" sortProperty="vorname" />
----

Durch Angabe von `sortable=true` und der dem Attribut `sortProperty` werden automatisch Buttons und Symbole zur Sortierung hinzugefügt.
Bei m Initialisieren des Models muss der Operationsmodus (SERVER oder CLIENT) angegegben werden.

`model.setMode(DatatableOperationMode.SERVER);`

Im Modus CLIENT erfolgt die Sortierung per JavaScript automatisch.
Im SERVER Modus wird die Methode updateDisplayItems des `DataTableControllers` aufgerufen, die die Tabelleneinträge unter allen Bedingungen (wie z.B. filter, sort und pagination) anzeigt.

[[selektionsverhalten-tabelle]]
==== Selektionsverhalten in einer Tabelle
:desc-image-tabellemehrfachselektion: Tabelle – Mehrfachselektion über STRG Taste & Maus
[id="image-tabellemehrfachselektion",reftext="{figure-caption} {counter:figures}"]
.{desc-image-tabellemehrfachselektion}
image::image185.png[align="center", width="629",height="200"]

:desc-image-tabellemehrfachselektioncheckbox: Tabelle – Mehrfachselektion über Checkboxen
[id="image-tabellemehrfachselektioncheckbox",reftext="{figure-caption} {counter:figures}"]
.{desc-image-tabellemehrfachselektioncheckbox}
image::image186.png[align="center", width="627",height="137"]

:desc-image-textlinkkennzeichen: Textlink z.B. Kennzeichnung eines Objektes
[id="image-textlinkkennzeichen",reftext="{figure-caption} {counter:figures}"]
.{desc-image-textlinkkennzeichen}
image::image187.png[align="center", width="629",height="207"]


*Hinweise zur Implementierung*

Um die Selektion von Zeilen zu ermöglichen, müssen folgende Konfigurationen durchgeführt werden:

_1._ In der Header-Definition muss ein `<isy:dataTableHeader>` Tag an erster Stelle mit folgender Definition aufgenommen werden:

[source, xml]
----
<isy:dataTableHeader>
   <isy:dataTableRowAllSelection />
</isy:dataTableHeader>
----

_2._ In der Row-Definition muss ein `<isy:dataTableCell>` Tag an erster Stelle mit folgender Definition aufgenommen werden:

[source, xml]
----
<isy:dataTableCell>
   <isy:dataTableRowSelection />
</isy:dataTableCell>
----

_3._ In der Table-Definition (`<isy:dataTable>`) muss das Attribut selectable="true" gesetzt sein.
Der Selektierungsmodus (einzeln,mehrere) wird über das Attribut `selectionMode` gesteuert.


[[grosse-datenmengen-tabelle]]
==== Große Datenmengen in einer Tabelle

Tabellen können sehr viele Daten enthalten und gegebenenfalls sehr lang werden.
Um dem Benutzer den Umgang mit solchen Tabellen zu vereinfachen, werden zunächst nicht alle Daten initial in der Tabelle angezeigt. Über einen _Mehr anzeigen_ Button oder einen Paginator kann der Benutzer sich bei Bedarf mehr Daten anzeigen lassen.

:desc-image-tabelleohnepaginator: Tabelle ohne Paginator
[id="image-tabelleohnepaginator",reftext="{figure-caption} {counter:figures}"]
.{desc-image-tabelleohnepaginator}
image::image189.png[align="center", width="629",height="245"]

:desc-image-tabellemitpaginator: Tabelle mit Paginator
[id="image-tabellemitpaginator",reftext="{figure-caption} {counter:figures}"]
.{desc-image-tabellemitpaginator}
image::image189.png[align="center", width="629",height="328"]


*Hinweise zur Implementierung*
Die Implementierung erfolgt über das Facet `<f:tablePagination>`, das Tag `<t:dataTablePaginator>` und den dazugehörigen `DataTablePaginationModel`

Zum Beispiel im `DataTableController`

[source, java]
----
@Override

public void initialisiereModel(DataTableModel model) {
   model.getPaginationModel().setPageSize(3);
   model.getPaginationModel().setMode(PaginationMode.SIMPLE);
   updateDisplayItems(model);
}
----

und in der View:

[source, xml]
----
<f:facet name="tablePagination">
   <isy:dataTablePaginator />
</f:facet>
----

[[check-box-ueberschrift]]
=== Check Box

Eine Check Box repräsentiert eine unabhängige, nicht-exklusive Auswahl.
Der Benutzer kann beliebige Optionen auswählen.


*Hinweise zur Implementierung*

Eine einzelne Checkbox wird über das Tag `<isy:selectBooleanCheckbox>` eingebunden.

Folgende Parameter sind zulässig:


* value: Der Wert der Checkbox für das Databinding im Model.

* label: Das Label der Checkbox.

* disabled: Ob die Checkbox deaktiviert ist oder nicht.
Standard: false

* showPrintView: Ein spezifisches Flag zur Erkennung der Druckansicht, falls notwendig (seit 3.1.x).

* required: Ob die Checkbox zwingend markiert werden muss oder nicht.
Standard: false (seit 3.1.x).

* onchange: Das onchange-Event der Checkbox (seit 3.1.x).


Mehrere Checkboxen werden über das Tag `<isy:selectManyCheckbox>` eingebunden.

Folgender Parameter ist zulässig:


* value: Der Wert für das Data-Binding (Eine Liste an SelectItems)

* showPrintView: Ein spezifisches Flag zur Erkennung der Druckansicht, falls notwendig (seit 3.1.x).


__Hinweis: __Der Tri-State ist noch nicht umgesetzt.

(Seit 3.1.x) Für Formulare existiert das Tag `<isy:formCheckbox>` und bietet vor allem eine Integration auf einem Formular.

Folgende Parameter sind zulässig:


* value: Der Wert der Checkbox für das Databinding im Model.

* reference: Die Referenz des Objekts für die Validierung.

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label.

* required: Ob die Eingabe ein Pflichteingabe ist. Standard: false

* inputStyleClass: Die CSS-Klasse für den Eingabebereich. Standard: col-lg-6

* disabled: Ob die Checkbox deaktiviert ist oder nicht. Standard: false

* validationModel: Ein spezifisches Validation-Model, falls benötigt

* globalConfig: Eine spezifische globale Konfiguration, falls benötig


Seit 4.0

* required: Ob die Eingabe eine Pflichteingabe ist. (rotes Sternchen)

* optional: Ob die Eingabe eine Optionale-Pflichteingabe ist. (blaues Sternchen)

* valueChangeListener: Die Listener-Methode, die bei einem Change Event aufgerufen wird.

[[radio-button-ueberschrift]]
=== Radio Button

Radio Buttons dienen der eindeutigen Auswahl von sich ausschließenden Optionen.
Der Benutzer kann also nur eine der Optionen auswählen.

:desc-image-ieradiobutton: Radio Button – Darstellungsbeispiel IE 9
[id="image-ieradiobutton",reftext="{figure-caption} {counter:figures}"]
.{desc-image-ieradiobutton}
image::image193.png[align="center", width="258",height="131"]


*Hinweise zur Implementierung*

Ein Radio Button wird über das Tag `<isy:selectOneRadio>` (bzw. `<isy:selectOneRadioInline>` , seit 3.1.x. und `<isy:formSelectOneRadio>`, seit 4.0.x) eingebunden.

Folgende Parameter sind für `<isy:selectOneRadioInline>` zulässig:


* value: Der Wert der Auswahl für das Data-Binding

* selectItems: Die Select-Items.
Jedes Item entspricht einem Radio-Button


Für `<isy:selectOneRadio>` ist zusätzlich folgendes Attribut zulässig:

* disabled: Ob die Darstellung nur lesend erfolgen soll (seit 4.0.x)

(seit 4.0.x) Für `<isy:formSelectOneRadio>` sind zusätzlich folgende Attribute zulässig:


* value: Der Wert der Auswahl für das Data-Binding
* inline: Ob die Radio-Buttons inline angezeigt werden sollen oder nicht.
* reference: Die Referenz des Objekts.
* label: Der Text für das Label
* labelStyleClass: Die CSS-Klasse für das Label.
* inputStyleClass: Die CSS-Klasse für den Eingabebereich.
* required: Ob die Eingabe ein Pflichteingabe ist.
* validationModel: Ein spezifisches Validation-Model, falls benötigt.
* globalConfig: Eine spezifsche globale Konfiguration, falls benötigt.

[[navigation]]
=== Navigation

[[horizontale-navigation]]
==== Horizontale Navigation

*Hinweise zur Implementierung*

Derzeit wird die Navigationsleiste im Header Bereich statisch geladen.
Jede Anwendung muss daher die Ressource `/WEB-INF/gui/common/s eitenelemente/navigation.xhtml` mit einer spezifischen Anpassung überschreiben.
Zukünftig soll eine Konfiguration der Links möglich sein.


[[linksnavigation]]
==== Linksnavigation

Die Linksnavigation ist ein optionales Element und kann zur weiteren Strukturierung einer Applikation dienen.
Sie kann über ein Icon ein- und ausgeblendet werden. 


*Hinweise zur Implementierung*

Linksnavigationen werden durch den Controller LinksnavigationController und das Model LinksnavigationModel realisiert.
Der Controller ist bereits im ApplikationseiteController eingebunden und muss daher nicht explizit aktiviert werden.

Linksnavigationen werden in der Konfigurationsdatei gui-linksnavigation.properties konfiguriert.
Die Konfigurationsdatei liegt im

Deployment, es handelt sich nicht um eine betriebliche Konfiguration.
Die Konfiguration muss in der Konfigurationsbean "konfiguration" eingebunden werden. Über die Variable gui.linksnavigation.ids wird zunächst eine Liste an IDs für die jeweiligen Linksnavigationen konfiguriert, z. B.:

`gui.linksnavigation.ids=linksnavigationbeispiel, jsfSteuerelemente`

Für jede vergebene ID wird eine Linksnavigation wie folgt konfiguriert:

`gui.linksnavigation.linksnavigationbeispiel.headline=Beispiellinkliste`
`gui.linksnavigation.linksnavigationbeispiel.1.text=Beispielseite A`
`gui.linksnavigation.linksnavigationbeispiel.1.link=beispiellinkaFlow`
`gui.linksnavigation.linksnavigationbeispiel.2.text=Beispielseite B`
`gui.linksnavigation.linksnavigationbeispiel.2.link=beispiellinkbFlow`

`gui.linksnavigation.jsfSteuerelemente.headline=Überschrift`
`gui.linksnavigation.jsfSteuerelemente.1.text=JSF-Steuerlemente`
`gui.linksnavigation.jsfSteuerelemente.1.link=jsfSteuerelementeFlow`

Anhand des aktuell aktiven Flows wird automatisch die korrekte Linksnavigation dargestellt und der enthaltene Link zum aktiven Flow wird entsprechend als ausgewählt dargestellt.
Wenn ein Subflow aktiv ist, dann wird immer der ursprünglich aufrufende Flow als der aktive Flow angesehen. Wenn keine passende Linksnavigation gefunden wird, dann wird keine dargestellt.
Weiterhin kann auf einer Applikationsseite eine individuelle Linksnavigation manuell eingebunden werden.

[[quicklinks]]
==== Quicklinks

Muss der Benutzer häufig auf bestimmte Funktionen oder Objekte in einer Anwendung zugreifen, so kann es sinnvoll sein ihm Schnellzugriffe, sogenannte Quicklinks auf diese Funktionen/Objekte zur Verfügung zu stellen.

:desc-image-quicklinksunterhalblinksnavigation: Quicklinks unterhalb der Linksnavigation
[id="image-quicklinksunterhalblinksnavigation",reftext="{figure-caption} {counter:figures}"]
.{desc-image-quicklinksunterhalblinksnavigation}
image::image202.png[align="center", width="240",height="400"]

:desc-image-quicklinksaufdashboard: Quicklinks auf Dashboard
[id="image-quicklinksaufdashboard",reftext="{figure-caption} {counter:figures}"]
.{desc-image-quicklinksaufdashboard}
image::image203.png[align="center", width="240",height="400"]


*Hinweise zur Implementierung*

Quicklinks werden durch den Controller `QuicklinksController` und das Model `QuicklinksModel` realisiert.
Der Controller kann in einen beliebigen Controller eingebunden werden und durch Aufrufe können die darzustellen Quicklinks gesteuert werden.

Quicklinks können hinzugefügt werden, indem im Controller `QuicklinksController` die Methode `fuegeQuicklinkHinzu(QuicklinkselementModel` `quicklinkselementModel`) aufgerufen wird.
Ein einzelner Quicklink (QuicklinkselementModel) besitzt folgende Attribute:


* `id`: Die ID eines Quicklinks

* `anzuzeigenderText`: Der Text der angezeigt wird

* `link`: Der dahinterliegende Link


Mit der Methode `entferneQuicklink(String id)` können Quicklinks wieder entfernt werden.
Quicklinks werden in der Session abgespeichert.

Die zuletzt hinzugefügten Quicklinks werden oben dargestellt. Wenn ein Quicklink hinzugefügt wird, der bereits vorhanden ist (Identifikation über seine ID), dann werden der Link und der anzuzeigende Text des Quicklinks aktualisiert und der Quicklink wird nach oben gesetzt. Wenn die maximale Anzahl an Quicklinks erreicht wird (konfigurierbar über den Konfigurationsparameter `gui.quicklinks.max.anzahl`), dann wird der älteste Quicklink entfernt.

Seit 3.1.x: Für Quicklinks kann es nun auch mehrere Gruppen geben (z.B. aktuelle Suchanfrage, letzte Suchanfragen)

Seit 4.1.x: Gruppen von Quicklinks können jetzt abhängig vom aktuellen Flow angezeigt werden.
Weiterhin ist es möglich nun die Quicklinksbereiche statisch (analog zur Linksnavigation zu konfigurieren). Hierzu können in der Konfiguration folgende Einstellungen hinterlegt werden:

* `gui.quicklinks.gruppenIds`: Die kommaseparierte Liste an vorkonfigurierten Quicklinksgruppen.
* `gui.quicklinks.<gruppeId>.text`: Der vorkonfigurierte Text der für die Gruppe angezeigt wird.
* `gui.quicklinks.<gruppeId>.contextflow`: Die kommaseparierte Liste an Startflows, welche die Anzeige der Gruppe erlauben.
Ist keine Konfiguration gesetzt, so wird die Gruppe immer angezeigt.


Gruppen können auch ohne Konfiguration (wie zuvor) existieren.
Die Konfiguration bietet lediglich einen statischen Weg zur Konfiguration der Quicklinksgruppen.


[[paginator]]
==== Paginator

*Hinweise zur Implementierung*

Siehe Große Datenmengen in einer Tabelle


===== Date Picker

Mit dem Date Picker kann der Benutzer per Klick auf das Kalender Icon ein Flyout öffnen, in dem der gewünschte Tag ausgewählt werden kann.
Im oberen Bereich kann der Benutzer zwischen den Monaten und Jahren wechseln.


*Hinweise zur Implementierung*

Der Date Picker wird über das Tag `<isy:formDate>` eingebunden und gehört zu den Formulareingabekomponenten.

Folgende Parameter sind zulässig:

* reference: Die Referenz des Objekts für die Validierung.

* value: Der Wert für das Databinding im Eingabefeld.

* required: Ob die Eingabe ein Pflichteingabe ist.Standard: false

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label. Standard: col-lg-6

* inputStyleClass: Die CSS-Klasse für den Eingabebereich. Standard: col-lg-6

* placeholder: Der Platzhalter, welcher im Eingabefeld angezeigt wird.

* language: Die Sprache für den Datepicker. Standard: de (Seit 3.1.x)

* dateFormat: Das Datumsformat für den Datepicker. Standard: dd.mm.yyyy (Seit 3.1.x)

* inputMask: Das Maskenformat für das Eingabefeld. Standard: 99.99.9999 (Seit 3.1.x)

* validationModel: Ein spezifisches Validation-Model, falls benötigt

* globalConfig: Eine spezifische globale Konfiguration, falls benötigt


Für den Datepicker wird ein externes Plug-In verwendet.
Das Feld an sich verhält sich also so, wie es das Plug-In vorgibt.

===== Time Picker

Mit Hilfe des Time Pickers kann der Benutzer Uhrzeiten auswählen.

*Hinweise zur Implementierung*

Derzeit noch nicht umgesetzt.

===== Buchstaben Picker

Der Buchstaben Picker kann den Benutzer bei der Auswahl bestimmter Buchstaben unterstützen z.B. zur Auswahl von Anfangsbuchstaben.


*Hinweise zur Implementierung*

Ein Charpicker für Sonderzeichen kann durch die Angabe von `charpicker=true` in einem Formulareingabefeld (`<isy:formInput>`) aktiviert werden (seit 3.1.x).

===== List Picker (Objektauswahl)

Der List Picker kann den Benutzer bei der Auswahl bestimmter Objekte unterstützen, in dem weitere Zusatzinformationen die Identifikation von Werten vereinfachen.


*Hinweise zur Implementierung*

Ein List Picker wird über das Tag `<isy:formListpicker>` eingebunden und gehört zu den Formularkomponenten.

Folgende Parameter sind zulässig:


* reference: Die Referenz des Objekts für die Validierung

* value: Der Wert für das Databinding im Eingabefeld

* required: Ob die Eingabe ein Pflichteingabe ist. Standard: false

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label. Standard: col-lg-6

* inputStyleClass: Die CSS-Klasse für den Eingabebereich. Standard: col-lg-6

* listpickerModel: Das Model für den Listpicker abgeleitet von ListpickerModel.

* listpickerController: Der Controller für den Listpicker abgeleitet von ListpickerController.

* header: Die sortierte Liste der Spaltenüberschriften.

* placeholder: Der Platzhalter, welcher im Eingabefeld angezeigt wird.

* inputmask: Die Eingabemaske für das Feld.

* ajaxLoading: Ob Items dynamisch nachgeladen werden sollen. Standard: false

* ajaxForm: Die ID des Formulars, welches für das dynamische Nachladen von Items verwendet wird.

* inputComplement: Die Nummer der Headerspalte, dessen Inhalt per Javascript im Eingabefeld ergänzt werden soll, sobald das Feld verlassen wird (z.B. Schlüsselwert zu Schlüssel anzeigen). Standardmäßig 0 = deaktiviert.

* validationModel: Ein spezifisches Validation-Model, falls benötigt

* globalConfig: Eine spezifische globale Konfiguration, falls benötigt


Falls JavaScript nicht aktiviert ist, dann wird statt dem List Picker ein einfaches Dropdown angezeigt.

Beispiel für die Integration eines List-Pickers (ohne Ajax)

[source, xml]
----
<isy:formListpicker
  reference="anfrageIdentifikation.gruppe"
  inputmask="99"
  listpickerModel="#\{identifikationModel.gruppeListpickerModel}"
  listpickerController="#\{behoerdeHelper.gruppeListpickerController}"
  label="#\{msg.MEL_Identifikation_Gruppe}"
  value="#\{identifikationModel.anfrageIdentifikation.gruppe}"
  header="#\{msg.MEL_Identifikation_Gruppe_Listpicker_Nummer},
          #\{msg.MEL_Identifikation_Gruppe_Listpicker_Name} "/>
----

Das spezifsche ListpickerModel enthält die Liste an Items, welche dargestellt werden sollen.
Die Filterung der Items geschieht automatisch über JavaScript.
Falls die Liste an Items zu groß wird, besteht die Möglichkeit die Auswahl über AJAX nachzuladen.
Dazu können die Attribute ajaxL oading="true" und ajaxForm="gruppeListpickerAjaxForm" ergänzt werden.
Zusätzlich muss im View State das entsprechende Form Element ergänzt werden:

[source, xml]
----
<ui:define name="form">
   <h:form id="gruppeListpickerAjaxForm">
      <isy:formListpickerAjaxContent
      listpickerModel="#\{identifikationModel.gruppeListpickerModel}" />
   </h:form>
</ui:define>
----
Über das `<ui:define>` lassen sich Form-Elemente im Basis-Layout integrieren.
Das Tag `<isy:formListpickerAjaxContent>` lädt die entsprechend ListpickerItems in das Formular.
Das Formular an sich ist nicht sichtbar.
Das JavaScript Plugin übernimmt das entsprechende Laden der Elemente in den Listpicker.
Die Filterung der Elemente kann im spezifischen ListpickerController definiert werden.

Für die Auswahl von Behörden existiert bereits ein fertiger Behördenlistpicker (`<isy:formBehoerdeListpicker>`), welcher den normalen Listpicker instanziiert.
Der Behördenlistpicker ist ein AJAX Listpicker, d.h. es muss immer ajaxForm angegeben werden.
Als Dropdown zeigt er eine zweispaltige Tabelle mit Behördenkennzeichen und Namen der Behörde an, auf welcher gefiltert werden kann.
Er besitzt folgende Parameter:


* reference: Die Referenz des Objekts für die Validierung

* value: Der Wert für das Databinding im Eingabefeld (muss vom Typ Listpickerangabe sein)

* required: Ob die Eingabe ein Pflichteingabe ist. Standard: false

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label. Standard: col-lg-6

* inputStyleClass: Die CSS-Klasse für den Eingabebereich. Standard: col-lg-6

* listpickerModel: Das Model für den Listpicker als Instanz von BehoerdeListpickerModel.

* listpickerController: Der Controller für den Listpicker abgeleitet von AbstractBehoerdeListpickerController mit spezifischer Implementierung der Anwendung.

* placeholder: Der Platzhalter, welcher im Eingabefeld angezeigt wird.

* ajaxForm: Die ID des Formulars, welches für das dynamische Nachladen von Items verwendet wird.

* validationModel: Ein spezifisches Validation-Model, falls benötigt

* globalConfig: Eine spezifische globale Konfiguration, falls benötigt

[[editaable-row]]
==== Editable Row

Editable Rows sind flexible Zeilen deren Inhalte separat bearbeitet werden können.

*Hinweise zur Implementierung*

Derzeit nicht umgesetzt.

[[selektion-ueberschrift]]
=== Selektion

Patterns zur Selektion von Daten

[[suche-ueberschrift]]
==== Suche

*Hinweise zur Implementierung*

Ein Beispiel zur Umsetzung eines Suchformulars findet sich hier: Hinweise zur Implementierung von Formularen

[[filter-ueberschift]]
==== Filter

*Hinweise zur Implementierung*

Diese Funktion ist derzeit noch nicht umgesetzt.


==== Toggle Filter

*Hinweise zur Implementierung*

(Seit 4.0.x) Ein Toggle-Filter wird über das Tag `<isy:toggleFilter>` eingebunden.
Folgende Parameter sind zulässig:


* action: Die auszuführende Aktion.

* label: Der Text für das Label.

* value: Der ausgewählt Filter.

* styleClass: Optionale CSS Style Klasse.

* execute: AJAX: Welche Felder ausgewertet werden sollen.

* render: AJAX: Welcher Teilbereich aktualisiert werden soll.

* globalConfig: Eine spezifische globale Konfiguration, falls nötig.


==== Filter Zeile


*Hinweise zur Implementierung*

Die Implementierung erfolgt über das Facet

 `<f:tableFilter>`
die Tags
 `<dataTableFilter>`
und
 `<dataTableFilterCleaner>`
und den dazugehörigen
 `dataTableFilterModel`.


Im Allgemeinen muss beim `<dataTableFilter>` Tag nur die Eigenschaft angegeben werden, nach der man filtern will.
Damit wird einen normalen Eingabefeld für die Filterung zur verfügung gestellt.
Es gibt auch die Möglichkeit die Filterung über eine Dropdownliste zu ermöglichen, dafür müssen die mögliche Einträge im Tag verschachtet angegeben werden.

**Hinweis**:Es ist besonders wichtig, dass die Anzahl der Spalten im Header, Filter-Zeile und Body übereinstimmen.
Dies wird auch in Javascript überprüft, und ggf.
bekommt der Entwickler eine Fehlermeldung.
Bei Spalten die nicht gefiltert werden sollen (bzw.
können), wie z.B. die Spalte mit den Checkboxen, muss man einen Platzhalter mit dem Tag <dataTableFilter > ohne Attribute angeben.

*Beispiel:*
[source, xml]
----
<f:facet name="tableFilter">
   <!-- Platzhalter für checkbox Spalte -->
   <isy:dataTableFilter />
     <isy:dataTableFilter property="anrede" dropdown="true">
         <f:selectItem itemValue="" itemLabel="Wählen Sie aus:" />
         <f:selectItems value="#\{dropdownHelper.anredeListe}" />
      </isy:dataTableFilter>
      <isy:dataTableFilter property="vorname" />
      <isy:dataTableFilter property="nachname" />
      <isy:dataTableFilter property="geburtsdatum" />
   <isy:dataTableFilterClearer />
</f:facet>
----

*Kein JavaScript*

image::image131.png[image,width=54,height=54]

Die Komfortfunktionen der Filter-Zeile können ohne JavaScript nicht zur Verfügung gestellt werden.
Die Filter-Zeile ist in diesem Fall nicht vorhanden und wird auch nicht angezeigt.

[[browse-und-collect]]
==== Browse & Collect

Mit Browse & Collect kann der Benutzer eine Liste von Objekten erstellen.
Hierbei werden Objekte von einer Quellliste in eine Zielliste übertragen.


*Hinweise zur Implementierung*

(Seit 4.0.x) Browse and Collect kann über das Tag `<isy:formBrowseAndCollect>` und `<isy:browseAndCollect>` eingebunden werden.
Folgende Parameter sind für `<isy:browseAndCollect>` zulässig:


* reference: Die Referenz des Objekts.
* value: Der Wert der Auswahl für das Databinding.
* disabled: Ob die Liste deaktiviert ist.
* browsecollectStyleClass: Die CSS-Klasse für die Komponente.
* size: Dieses Attribut wird im Sinne von bootstrap-selectlist.js interpretiert, d.h. gibt die Anzahl der Zeilen die sichtbar sind.
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.


Folgende Parameter sind zusätzlich für `<isy:formBrowseAndCollect>` zulässig:

* label: Der Text für das Label.
* labelStyleClass: Die CSS-Klasse für das Label.
* inputStyleClass: Die CSS-Klasse für den Eingabebereich.
* validationModel: Ein spezifisches Validation-Model, falls benötigt.

[[datentabelle]]
==== Datentabelle

*Hinweise zur Implementierung*

Details zur Umsetzung finden sich hier: Tabelle

[[datenvorschau]]
==== Datenvorschau

Die Datenvorschau kann zur Vorschau oder Zusammenfassung von komplexen Daten dienen.

*Hinweise zur Implementierung*

Details zur Umsetzung finden sich hier: Tabelle


[[master-detail]]
==== Master-Detail

Bei dem Master-Detail Konzept werden Informationen eines Master-Objekts und dessen Details auf einer Seite dargestellt.
Zum Beispiel kann eine Liste von Objekten in einer Tabelle (Master) dargestellt werden.
Die dazugehörigen Informationen (Detail) werden je nach Layout in einem Bereich darunter oder daneben angezeigt.


*Hinweise zur Implementierung*

Die Master-Detail Ansicht kann durch die Nutzung von einfachen Elementen (Tabelle, Buttons, bedingtes Rendern (ui:fragment)) umgesetzt werden.

[[gruppierung]]
=== Gruppierung

Patterns zur Gruppierung von Daten


*Hinweise zur Implementierung*

Ein Expander kann durch die Angabe von `collapse="true"` und der Angaben eines entsprechenden Panel Models in der Komponente `<isy :panel>` erzeugt werden. Über das PanelModel lässt sich auch der Initialzustand steuern.

*Gruppierungs-Container*


*Hinweise zur Implementierung*

Durch die Angabe von `<isy:panel>` können entsprechene Gruppierungs-Container erstellt werden.
Das Tag hat folgende Parameter/Attribute:

* collapse: Ob das Panel einklappbar sein soll.
Falls ja, so muss auch ein panelModel angegeben werden.
* panelModel: Das Panel Model.
Das Panel Model.
Nur Notwendig falls das Panel einklappbar sein soll.
Das Panel Model sollte Teil des Seitenmodels sein.
* globalConfig: Eine spezifische globale Konfiguration, falls notwendig.


Das Tag bietet folgende Facets:

* panelHeader: Zur Angabe des Headers

__Hinweis__: Derzeit existiert noch kein vereinfachter Weg zur Angabe von Buttons/Icons im Panel.
Diese müssen also über den panelHeader eigenständig definiert werden.

Zur Gruppierung von mehreren Panels sollte das Tag `<isy:panelGroup>` verwendet werden.
In diesem können die anderen Panels geschachtelt werden.
Das Tag besitzt folgende Parameter:

* headerPanel: Ob die Gruppe als Container für den Header des Inhaltesbereichs dient.
Falls ja werden entsprechende CSS-Klassen für das Layouting eingebunden.

==== Seiten Toolbar

*Hinweise zur Implementierung*

Die Seitentoolbar ist Teil des BasisModel.
Auf das SeitentoolbarModel kann daher über den BasisController zuegriffen werden.
Der ApplikationseiteController und der DetailseiteController konfigurieren dieses Model entsprechend den Vorgaben automatisch.

Über die Template-Engine (ui:insert/ui:define) werden weiterhin folgende Bereiche zur Verfügung gestellt.
Konkrete Seiten können dadurch Einfluss auf das Aussehen der Seitentoolbar nehmen:

* seitentoolbarLinksButtons: Fügt Anpassungen auf der linken Seite ein.
* seitentoolbarMitteButtons: Fügt Anpassungen in der Mitte (zentriert) ein.
* seitentoolbarRechtsButtons: Fügt Anpassungen auf der rechten Seite ein.

==== Tabellen Toolbar
*Hinweise zur Implementierung*

Derzeit noch nicht umgesetzt.

[[layout-von-Formularen]]
=== Layout von Formularen


[[hinweise-zur-implementierung-ueberschrift-2]]
=== Hinweise zur Implementierung

*Definition von Formularen*

Die Umsetzung von Formularen erfolgt mit den gängigen Bootstrap CSS Klassen.
Um ein einfaches Suchformular umzusetzen genügt z.B. folgender Code:

[source, xml]
----
<div class="form-horizontal">
   <div class="row row-df">
      <div class="col-lg-6"> <isy:formInput reference="vorname" ... />
         <isy:formInput reference="nachname" .... />
      </div>
      <div class="col-lg-6">
         <isy:formInput reference="geburtsort" ... />
         <isy:formSelectOneDropdown reference="geschlecht" ... />
         <isy:formListpicker reference="staatsangehoerigkeit" ... />
      </div>
   </div>
 </div>
 ...

<isy:buttonRow alignRight="true">
   <isy:button id="suchen"
      action="suchen"
      value="#\{msg_currentflow.MEL_Suchleiste_BTN_Suchen}" />
   <isy:button id="suchfelderLeeren"
      action="suchfelderLeeren"
      value="#\{msg_currentflow.MEL_Suchleiste_BTN_SuchfelderLeeren}" />
</isy:buttonRow>
----

Durch die Angabe von `form-horizontal` wird der Bereich für das Formular definiert.
Mit Angabe von `row row-df` beginnt die Nutzung des Bootstrap Scaffoldings `(row-df` ist dabei eine Spezialanpassung zur Nutzung von Bootstrap unter IE8 ohne JavaScript).


*Formularkomponenten*

Neben den normalen Bedienkomponenten existieren auch Formularkomponenten (erkennbar an dem Präfix `<isy:form...>`). Diese Komponenten integrieren sich direkt in ein Formular.
Sie bringen ein Label sowie eine Integration in den Validierungsmechanismus mit sich.
Die einzelnen Formularkomponenten werden in den jeweiligen Kapiteln der Bedienelemente beschrieben.

(Seit 3.1.x) In den Formularen kann durch das Angeben von `<isy:formDefaultButton> eine Standardbutton zur Auslösung definiert werden.
Beim Drücken auf "Enter" wird dann diese Aktion ausgeführt.
Die Funktionalität ist nur bei aktiviertem JavaScript verfügbar. 

(Seit 3.1.x) Um anwendungsspezifische Elemente in ein Formular zu integrieren, kann das Tag `<isy:formCustom>` verwendet werden.
Die Elemente innerhalb dieses Tags werden dann mit Label an der korrekten Stelle im Formular angezeigt (z.B. anstatt eines Eingabefelds bei Nutzung von formInput). Die Komponente unterstützt folgende Attribute:


* reference: Die Referenz des Objekts für die Validierung

* label: Der Text für das Label.

* labelStyleClass: Die CSS-Klasse für das Label. Standard: col-lg-6

* inputStyleClass: Die CSS-Klasse für den Eingabebereich. Standard: col-lg-6

* breakWords: Erlaubt das Deaktivieren des Wrappings von Text innerhalb der Komponente.

* globalConfig: Eine spezifische globale Konfiguration, falls benötigt

Die Komponente besitzt folgende Facets:

* contentRight: Der Inhalt, der rechts vom eingefügten Element angezeigt wird.

[[autosuggestion]]
=== Autosuggestion

*Hinweise zur Implementierung*

Derzeit noch nicht umgesetzt.

[[platzhalter-ueberschrift]]
=== Platzhalter

*Hinweise zur Implementierung*

Platzhalter können über das Attribut placeholder in den Eingabekomponenten angegeben werden.
Die Angabe von Platzhaltern ist derzeit noch nicht in allen Eingabekomponenten möglich.


[[tooltips-ueberschrift]]
=== Tooltips

*Hinweise zur Implementierung*

(Seit 4.0.x) Für das einbinden eines Tooltips kann das Tag `<isy:tooltip>` verwendet werden.
Es besitzt folgende Parameter:

* text: Der Text, der bei Hover über das Element angezeigt werden soll.
* title: Eine optionale Überschrift die fett über den Text angezeigt wird.


[[fortschrifttsanzeige]]
=== Fortschrittsanzeige

*Hinweise zur Implementierung*

Derzeit noch nicht umgesetzt.


[[anzeige-optionale-Pflichtfelder]]
=== Anzeige von Pflichtfeldern und optionalen Pflichtfeldern

*Hinweise zur Implementierung*

Derzeit nur teilweise umgesetzt.
Pflichtfelder können über die Angabe des Attributs required in der entsprechenden Komponentendefinition gesetzt werden.

Eine Umsetzung für optionale Pflichtfelder fehlt derzeit.


[[validierung-ueberschrift]]
=== Validierung


*Hinweise zur Implementierung*

_Nachrichten_

Der MessageController erlaubt es, Nachrichten auszugeben.
Folgende Methoden für Hinweismeldungen, Erfolgsmeldungen, Warnmeldungen und Fehlermeldungen werden angeboten:

*  void writeInfoMessage(String information)
*  void writeSuccessMessage(String success)
*  void writeWarnMessage(String warning, String summary)
*  void writeErrorMessage(String error, String summary)

Weiterhin können die aktuell vorhandenen Meldungen ausgelesen werden:

*  List<FacesMessage> getCurrentInfoMessages()
*  List<FacesMessage> getCurrentSuccessMessages()
*  List<FacesMessage> getCurrentWarnMessages()
*  List<FacesMessage> getCurrentErrorMessages()

Nachrichten werden über das Tag `<isy:messages>` im Basis-Layout gerendert.
Dies geschieht automatisch und ohne weiteres zutun.

_Validierung_

Mit dem ValidierungController können Validierungsmeldungen hinzugefügt werden, indem folgende Methode aufgerufen wird:

* void processValidationMessages(List<ValidationMessage> validationMessages)


Eine einzelne Validierungsmeldung besteht dabei aus folgenden Attributen:

* code: Der (Fehler)Code der Nachricht (z. B. "XYZ")

* reference: Die Referenz auf den Fehler ( z. B. "person.geburtsdatum")

* readableReference: Die lesbare Darstellung der Referenz (z. B. "Geburtsdatum")

* message: Die Fehlernachricht


Validierungsmeldungen werden nur für den aktuellen Aufruf (FlashScope) angezeigt.
Wenn JavaScript nicht aktiviert ist, werden alle Validierungsfehler in einer Liste angzeigt.
Auf den Tooltip wird verzichtet.
Für die Zuordnung von Validierungsfehler und Eingabefeld wird das Attribut reference verwendet, welches auch in der entsprechenden Formularkomponente `<isy:form...>` angegeben werden muss.

Für den Einsatz mit der plis-validation (Bean Validation) wird bereits ein GuiValidator mitgeliefert, welcher direkt ValidationMessages liefert.
Diese können dann dem ValidationController übergeben werden.
Als Referenz wird dabei automatisch der Property-Path der ConstraintViolation verwendet.

[[kapitel-plis-webgu]]
== PLIS-Webgui

Die PLIS-Webgui ist eine kleine Beispielanwendung, die die Java-Bibliotheken PLIS-Web und PLIS-Style einsetzt.
Die Anwendung zeigt die Features der Bibliothek beispielhaft.
Bei Änderungen an der PLIS-Web und der PLIS-Style muss auch die PLIS-Webgui nachgezogen werden.

Erklärungen zur Nutzung der PLIS-Web (inkl. PLIS-Style) sind unter Nutzung der Web-Bibliothek zu finden.

*Historie*

|===
|Version |Datum |Änderung

|v1.0.0
|13.02.2015
|Initiale Auslieferung
|===


*Einleitung*

Es wurden HTML5 Markup und Stylesheets sowie grafische Assets für eine webbasierte Benutzeroberfläche entwickelt.
Für die Entwicklung wurde der BVA User Interface Style Guide zugrunde gelegt.

Dieses Dokument beschreibt die technische Entwicklung seitens Ergosign und beinhaltet Informationen über die Projektstruktur sowie Richtlinien für Entwickler, die diese Styles und Templates implementieren.

*Gelieferte Dateien*

Es wird eine Sammlung von Dateien inklusive Quelldateien, Tools und auslieferungsfertigen Dateien mit der folgenden Dateistruktur zur Verfügung gestellt (die Einrückung und Verzeichnisse in Großbuchstaben spiegeln die Dateistruktur wider):

* ICONLIBRARY (Quelldateien)
** … .svg (SVG-Vektorgrafiken, die als Grundlage zum Aufbau des Icon-Fonts dienen)
* SRC (Quelldateien)
** ASSETS (Statische Dateien, die während eines Build-Prozesses in den www Ordner kopiert werden)

***  CSS
****  bootstrap-timepicker.min.css (Style für ein jQuery Plugin)
****  datepicker.css (Style für ein jQuery Plugin)
****  ie8fixes.css (Stylesheet, das nur mit dem IE8 geladen wird)
****  magnific-popup.css (Style für ein jQuery Plugin)

*** IMG
**** CONTROLS
***** … .png (Grafiken für Bedienelemente (Controls))
***** …. .png (Grafiken für das Seitenlayout und die Inhaltsdarstellung)

*** LIB (JavaScript-Bibliotheken wie jQuery)
**** … .js

*** PLUGINS (JavaScript Plugins für jQuery und Bootstrap, Layout-Skripte)
**** … .js

** ICONFONT (Ein komplettes http://icomoon.io[icomoon.io] Icon-Font-Paket)
*** style.css (Stylesheet mit importierten Icon-Font-Angaben)
*** … (Sonstige Dateien)

** JS (Applikationsspezifischer JavaScript-Code)
*** es.js (Code für prototypische Interaktionen)
*** onload.js (JavaScript-Code, der beim Öffnen einer Seite geladen wird)

** LESS (Quelldateien der Stylesheets)
***  BOOTSTRAP (Original Stylesheet-Quelldateien von Bootstrap (unverändert))
*** ES (Applikationsspezifisch angepasste Less Dateien)
*** THIRDPARTY (Less Dateien aus anderen Quellen)
*** custom.less (Spezifische Anpassungen)
*** print.less (Anpassungen speziell für die Druckausgabe)
*** styles.less (Hauptdatei (less) für die Kompilierung)

** TEMPLATES (Teilelemente der Seiten in HTML5 Markup)
*** … .tpl (Kopf-, Fuß- und Inhaltsbereich getrennt)

* WWW (Verzeichnis für kompilierte Dateien – beinhaltet vorkomplierte Assets.
Dateien nicht bearbeiten!)
** CSS (Stylesheets)
*** FONTS (Beinhaltet Web-Font-Dateien für den Icon-Font)
*** bootstrap-timepicker.min.css
*** datepicker.css
*** ie8fixes.css
*** magnific-popup.css
*** print.less (Stylesheet für die Druckausgabe)
*** styles.css (Hauptstylesheet)

** IMG (Bitmap Grafiken)
** JS (Applikationsspezifisches JavaScript)
*** es.js
*** onload.debug.js
*** onload.js
*** onload.js.map

**  LIB (JavaScript Bibliotheken, iQuery, Bootstrap)
**  PLUGINS (Plugins für jQuery oder Bootstrap)
** index.html (Übersicht über die Bedienelemente und Absprungseite für die einzelnen Templates)
** … .html (Weitere statische Seitentemplates)


*changelog.md* (detaillierte Änderungshistorie)

*package.json* (Definitionen der Projekt-Module inklusive Abhängigkeiten für das Grunt-BuildSystem)

*Gruntfile.js* (Ergosign spezifische Konfigurationen für das Grunt-Build-System, um das Frontend zu kompilieren)

